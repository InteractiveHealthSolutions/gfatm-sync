DROP TABLE IF EXISTS dim_datetime;
CREATE TABLE dim_datetime ( datetime_id bigint(21) NOT NULL AUTO_INCREMENT, full_date varchar(50) NOT NULL, year int(11) NOT NULL, month int(11) NOT NULL, date int(11) NOT NULL, day_name varchar(50) NOT NULL, month_name varchar(50) NOT NULL, PRIMARY KEY (datetime_id), UNIQUE KEY full_date (full_date)) ENGINE=MyISAM DEFAULT CHARSET=utf8;
DROP TABLE IF EXISTS dim_concept;
CREATE TABLE dim_concept ( surrogate_id bigint(21) NOT NULL, implementation_id int(11) NOT NULL DEFAULT '0', concept_id int(11) NOT NULL, full_name varchar(255) DEFAULT '', concept varchar(255) DEFAULT '', description text, retired tinyint(1) NOT NULL DEFAULT '0', data_type varchar(255) NOT NULL DEFAULT '', class varchar(255) NOT NULL DEFAULT '', creator int(11) NOT NULL DEFAULT '0', date_created datetime NOT NULL, version int(11) DEFAULT NULL, changed_by int(11) DEFAULT NULL, date_changed datetime DEFAULT NULL, uuid char(38) DEFAULT NULL, PRIMARY KEY (surrogate_id), UNIQUE KEY concept_id (concept_id), UNIQUE KEY uuid_unique (uuid)) ENGINE=MyISAM DEFAULT CHARSET=utf8;
DROP TABLE IF EXISTS dim_location;
CREATE TABLE dim_location ( surrogate_id bigint(21) NOT NULL, implementation_id int(11) NOT NULL DEFAULT '0', location_id int(11) NOT NULL, location_name varchar(255) NOT NULL DEFAULT '', description varchar(255) DEFAULT NULL, address1 varchar(255) DEFAULT NULL, address2 varchar(255) DEFAULT NULL, city_village varchar(255) DEFAULT NULL, state_province varchar(255) DEFAULT NULL, postal_code varchar(50) DEFAULT NULL, country varchar(50) DEFAULT NULL, latitude varchar(50) DEFAULT NULL, longitude varchar(50) DEFAULT NULL, creator int(11) NOT NULL DEFAULT '0', date_created datetime NOT NULL, retired tinyint(1) NOT NULL DEFAULT '0', parent_location int(11) DEFAULT NULL, uuid char(38) DEFAULT NULL, PRIMARY KEY (surrogate_id), UNIQUE KEY location_id (location_id), UNIQUE KEY uuid_unique (uuid)) ENGINE=MyISAM DEFAULT CHARSET=utf8;
DROP TABLE IF EXISTS dim_user;
CREATE TABLE dim_user ( surrogate_id bigint(21) NOT NULL, implementation_id int(11) NOT NULL, user_id int(11) NOT NULL, username varchar(50) NOT NULL, person_id int(11) NOT NULL, identifier varchar(255) DEFAULT NULL, secret_question varchar(255) DEFAULT NULL, secret_answer varchar(255) DEFAULT NULL, creator int(11) NOT NULL DEFAULT '0', date_created datetime NOT NULL, changed_by int(11) DEFAULT NULL, date_changed datetime DEFAULT NULL, retired tinyint(1) NOT NULL DEFAULT '0', retire_reason varchar(255) DEFAULT NULL, uuid char(38) NOT NULL, PRIMARY KEY (surrogate_id), UNIQUE KEY user_id_unique (user_id), UNIQUE KEY username_unique (username), UNIQUE KEY person_id_unique (person_id)) ENGINE=MyISAM DEFAULT CHARSET=utf8;
DROP TABLE IF EXISTS dim_patient;
CREATE TABLE dim_patient ( surrogate_id bigint(21) NOT NULL, implementation_id int(11) NOT NULL, patient_id int(11) NOT NULL, identifier varchar(50) NOT NULL DEFAULT '', secondary_identifier varchar(50) DEFAULT NULL, gender varchar(50) DEFAULT '', birthdate date DEFAULT NULL, birthdate_estimated tinyint(1) NOT NULL DEFAULT '0', dead tinyint(1) NOT NULL DEFAULT '0', first_name varchar(50) DEFAULT NULL, middle_name varchar(50) DEFAULT NULL, last_name varchar(50) DEFAULT NULL, race text, birthplace text, citizenship text, mother_name text, civil_status text, health_district text, health_center text, primary_mobile text, secondary_mobile text, primary_phone text, secondary_phone text, primary_mobile_owner text, secondary_mobile_owner text, primary_phone_owner text, secondary_phone_owner text, address1 text, address2 text, city_village text, state_province text, postal_code text, country text, creator int(11) NOT NULL DEFAULT '0', date_created datetime NOT NULL, changed_by int(11) DEFAULT NULL, date_changed datetime DEFAULT NULL, voided tinyint(1) NOT NULL DEFAULT '0', uuid char(38) DEFAULT NULL, PRIMARY KEY (surrogate_id), UNIQUE KEY patient_id_unique (patient_id), UNIQUE KEY uuid_unique (uuid), KEY identifier (identifier)) ENGINE=MyISAM DEFAULT CHARSET=utf8;
DROP TABLE IF EXISTS dim_encounter;
CREATE TABLE dim_encounter ( surrogate_id bigint(21) NOT NULL, implementation_id int(11) NOT NULL DEFAULT '0', encounter_id int(11) NOT NULL, encounter_type int(11) NOT NULL, encounter_name varchar(50) NOT NULL DEFAULT '', description text, patient_id int(11) NOT NULL DEFAULT '0', location_id int(11) DEFAULT NULL, provider varchar(255) DEFAULT NULL, date_entered datetime NOT NULL, changed_by int(11) DEFAULT NULL, date_changed datetime DEFAULT NULL, creator int(11) DEFAULT NULL, date_start datetime DEFAULT NULL, date_end datetime DEFAULT NULL, uuid char(38) NOT NULL, PRIMARY KEY (surrogate_id), UNIQUE KEY encounter_id (encounter_id), UNIQUE KEY uuid_unique (uuid), KEY patient_id (patient_id), KEY location_id (location_id), KEY provider (provider)) ENGINE=MyISAM DEFAULT CHARSET=utf8;
DROP TABLE IF EXISTS dim_obs;
CREATE TABLE dim_obs ( surrogate_id bigint(21) NOT NULL, implementation_id int(11) NOT NULL DEFAULT '0', encounter_id int(11) DEFAULT NULL, encounter_type int(11) DEFAULT NULL, patient_id int(11) DEFAULT NULL, identifier varchar(50) DEFAULT NULL, provider varchar(50) DEFAULT NULL, obs_id int(11) NOT NULL, concept_id int(11) NOT NULL DEFAULT '0', question varchar(255) DEFAULT '', obs_datetime datetime NOT NULL, location_id int(11) DEFAULT NULL, answer longtext, value_boolean tinyint(1) DEFAULT NULL, value_coded int(11) DEFAULT NULL, value_datetime datetime DEFAULT NULL, value_numeric double DEFAULT NULL, value_text text, creator int(11) NOT NULL DEFAULT '0', date_created datetime NOT NULL, voided tinyint(1) NOT NULL DEFAULT '0', uuid char(38) DEFAULT NULL, PRIMARY KEY (surrogate_id), UNIQUE KEY obs_id_unique (obs_id), KEY identifier (identifier), KEY encounter_type (encounter_type), KEY concept_id (concept_id), KEY question (question), KEY location_id (location_id)) ENGINE=MyISAM DEFAULT CHARSET=utf8;

DROP TABLE IF EXISTS fact_user;
CREATE TABLE fact_user ( implementation_id int(11) NOT NULL, datetime_id bigint(21) NOT NULL, full_date varchar(50) NOT NULL, year int(11) NOT NULL, month int(11) NOT NULL, date int(11) NOT NULL, day_name varchar(50) NOT NULL, month_name varchar(50) NOT NULL, users bigint(21) NOT NULL DEFAULT '0', PRIMARY KEY (implementation_id,datetime_id)) ENGINE=MyISAM DEFAULT CHARSET=utf8;
DROP TABLE IF EXISTS fact_concept;
CREATE TABLE fact_concept ( implementation_id int(11) NOT NULL, active int(11) DEFAULT '0', real_valued int(11) DEFAULT '0', open_text int(11) DEFAULT '0', coded int(11) DEFAULT '0', unique_concepts int(11) DEFAULT '0', total int(11) DEFAULT '0', PRIMARY KEY (implementation_id)) ENGINE=MyISAM DEFAULT CHARSET=utf8;
DROP TABLE IF EXISTS fact_location;
CREATE TABLE fact_location ( implementation_id int(11) NOT NULL DEFAULT '0', datetime_id bigint(21) NOT NULL DEFAULT '0', full_date varchar(50) NOT NULL, year int(11) NOT NULL, month int(11) NOT NULL, date int(11) NOT NULL, day_name varchar(50) NOT NULL, month_name varchar(50) NOT NULL, total bigint(21) NOT NULL DEFAULT '0') ENGINE=MyISAM DEFAULT CHARSET=utf8;
