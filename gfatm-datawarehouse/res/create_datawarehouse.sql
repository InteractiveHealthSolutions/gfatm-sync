CREATE TABLE IF NOT EXISTS _implementation ( implementation_id int(11) NOT NULL, connection_url varchar(255) NOT NULL, driver varchar(255) NOT NULL, db_name varchar(45) NOT NULL, username varchar(45) DEFAULT NULL, `password` varchar(255) DEFAULT NULL, active bit(1) NOT NULL, date_added datetime NOT NULL, `status` varchar(45) DEFAULT NULL, last_updated datetime DEFAULT NULL, description text, PRIMARY KEY (implementation_id), UNIQUE KEY implementation_id_UNIQUE (implementation_id)) DEFAULT CHARSET=utf8;
-- Transaction tables
CREATE TABLE IF NOT EXISTS person_attribute_type ( surrogate_id int(11) NOT NULL AUTO_INCREMENT, implementation_id int(11) NOT NULL, person_attribute_type_id int(11) NOT NULL, name varchar(50) NOT NULL DEFAULT '', description text, format varchar(50) DEFAULT NULL, foreign_key int(11) DEFAULT NULL, searchable tinyint(1) NOT NULL DEFAULT '0', creator int(11) NOT NULL DEFAULT '0', date_created datetime NOT NULL, changed_by int(11) DEFAULT NULL, date_changed datetime DEFAULT NULL, retired tinyint(1) NOT NULL DEFAULT '0', retired_by int(11) DEFAULT NULL, date_retired datetime DEFAULT NULL, retire_reason varchar(255) DEFAULT NULL, edit_privilege varchar(255) DEFAULT NULL, sort_weight double DEFAULT NULL, uuid char(38) NOT NULL, PRIMARY KEY (surrogate_id), KEY person_attribute_type_uuid_index (uuid), KEY attribute_is_searchable (searchable), KEY name_of_attribute (name), KEY person_attribute_type_retired_status (retired), KEY attribute_type_changer (changed_by), KEY attribute_type_creator (creator), KEY user_who_retired_person_attribute_type (retired_by), KEY privilege_which_can_edit (edit_privilege)) ENGINE=InnoDB DEFAULT CHARSET=utf8;
CREATE TABLE IF NOT EXISTS person_attribute ( surrogate_id int(11) NOT NULL AUTO_INCREMENT, implementation_id int(11) NOT NULL, person_attribute_id int(11) NOT NULL, person_id int(11) NOT NULL DEFAULT '0', value varchar(50) NOT NULL DEFAULT '', person_attribute_type_id int(11) NOT NULL DEFAULT '0', creator int(11) NOT NULL DEFAULT '0', date_created datetime NOT NULL, changed_by int(11) DEFAULT NULL, date_changed datetime DEFAULT NULL, voided tinyint(1) NOT NULL DEFAULT '0', voided_by int(11) DEFAULT NULL, date_voided datetime DEFAULT NULL, void_reason varchar(255) DEFAULT NULL, uuid char(38) NOT NULL, PRIMARY KEY (surrogate_id), KEY person_attribute_uuid_index (uuid), KEY attribute_changer (changed_by), KEY attribute_creator (creator), KEY defines_attribute_type (person_attribute_type_id), KEY identifies_person (person_id), KEY attribute_voider (voided_by)) ENGINE=InnoDB DEFAULT CHARSET=utf8;
CREATE TABLE IF NOT EXISTS person_address ( surrogate_id int(11) NOT NULL AUTO_INCREMENT, implementation_id int(11) NOT NULL, person_address_id int(11) NOT NULL, person_id int(11) DEFAULT NULL, preferred tinyint(1) NOT NULL DEFAULT '0', address1 varchar(255) DEFAULT NULL, address2 varchar(255) DEFAULT NULL, city_village varchar(255) DEFAULT NULL, state_province varchar(255) DEFAULT NULL, postal_code varchar(50) DEFAULT NULL, country varchar(50) DEFAULT NULL, latitude varchar(50) DEFAULT NULL, longitude varchar(50) DEFAULT NULL, start_date datetime DEFAULT NULL, end_date datetime DEFAULT NULL, creator int(11) NOT NULL DEFAULT '0', date_created datetime NOT NULL, voided tinyint(1) NOT NULL DEFAULT '0', voided_by int(11) DEFAULT NULL, date_voided datetime DEFAULT NULL, void_reason varchar(255) DEFAULT NULL, county_district varchar(255) DEFAULT NULL, address3 varchar(255) DEFAULT NULL, address4 varchar(255) DEFAULT NULL, address5 varchar(255) DEFAULT NULL, address6 varchar(255) DEFAULT NULL, date_changed datetime DEFAULT NULL, changed_by int(11) DEFAULT NULL, uuid char(38) NOT NULL, PRIMARY KEY (surrogate_id), KEY person_address_uuid_index (uuid), KEY patient_address_creator (creator), KEY address_for_person (person_id), KEY patient_address_void (voided_by), KEY person_address_changed_by (changed_by)) ENGINE=InnoDB DEFAULT CHARSET=utf8;
CREATE TABLE IF NOT EXISTS person ( surrogate_id int(11) NOT NULL AUTO_INCREMENT, implementation_id int(11) NOT NULL, person_id int(11) NOT NULL, gender varchar(50) DEFAULT '', birthdate date DEFAULT NULL, birthdate_estimated tinyint(1) NOT NULL DEFAULT '0', dead tinyint(1) NOT NULL DEFAULT '0', death_date datetime DEFAULT NULL, cause_of_death int(11) DEFAULT NULL, creator int(11) DEFAULT NULL, date_created datetime NOT NULL, changed_by int(11) DEFAULT NULL, date_changed datetime DEFAULT NULL, voided tinyint(1) NOT NULL DEFAULT '0', voided_by int(11) DEFAULT NULL, date_voided datetime DEFAULT NULL, void_reason varchar(255) DEFAULT NULL, uuid char(38) NOT NULL, deathdate_estimated tinyint(1) NOT NULL DEFAULT '0', birthtime time DEFAULT NULL, PRIMARY KEY (surrogate_id), KEY person_uuid_index (uuid), KEY person_birthdate (birthdate), KEY person_death_date (death_date), KEY person_died_because (cause_of_death), KEY user_who_changed_person (changed_by), KEY user_who_created_person (creator), KEY user_who_voided_person (voided_by)) ENGINE=InnoDB DEFAULT CHARSET=utf8;
CREATE TABLE IF NOT EXISTS person_name ( surrogate_id int(11) NOT NULL AUTO_INCREMENT, implementation_id int(11) NOT NULL, person_name_id int(11) NOT NULL, preferred tinyint(1) NOT NULL DEFAULT '0', person_id int(11) NOT NULL, prefix varchar(50) DEFAULT NULL, given_name varchar(50) DEFAULT NULL, middle_name varchar(50) DEFAULT NULL, family_name_prefix varchar(50) DEFAULT NULL, family_name varchar(50) DEFAULT NULL, family_name2 varchar(50) DEFAULT NULL, family_name_suffix varchar(50) DEFAULT NULL, degree varchar(50) DEFAULT NULL, creator int(11) NOT NULL DEFAULT '0', date_created datetime NOT NULL, voided tinyint(1) NOT NULL DEFAULT '0', voided_by int(11) DEFAULT NULL, date_voided datetime DEFAULT NULL, void_reason varchar(255) DEFAULT NULL, changed_by int(11) DEFAULT NULL, date_changed datetime DEFAULT NULL, uuid char(38) NOT NULL, PRIMARY KEY (surrogate_id), KEY person_name_uuid_index (uuid), KEY first_name (given_name), KEY last_name (family_name), KEY middle_name (middle_name), KEY family_name2 (family_name2), KEY user_who_made_name (creator), KEY name_for_person (person_id), KEY user_who_voided_name (voided_by)) ENGINE=InnoDB DEFAULT CHARSET=utf8;
CREATE TABLE IF NOT EXISTS privilege ( surrogate_id int(11) NOT NULL AUTO_INCREMENT, implementation_id int(11) NOT NULL, privilege varchar(255) NOT NULL, description text, uuid char(38) NOT NULL, PRIMARY KEY (surrogate_id), KEY privilege_uuid_index (uuid)) ENGINE=InnoDB DEFAULT CHARSET=utf8;
CREATE TABLE IF NOT EXISTS role ( surrogate_id int(11) NOT NULL AUTO_INCREMENT, implementation_id int(11) NOT NULL, role varchar(50) NOT NULL DEFAULT '', description varchar(255) DEFAULT NULL, uuid char(38) NOT NULL, PRIMARY KEY (surrogate_id), KEY role_uuid_index (uuid)) ENGINE=InnoDB DEFAULT CHARSET=utf8;
CREATE TABLE IF NOT EXISTS users ( surrogate_id int(11) NOT NULL AUTO_INCREMENT, implementation_id int(11) NOT NULL, user_id int(11) NOT NULL, system_id varchar(50) NOT NULL DEFAULT '', username varchar(50) DEFAULT NULL, password varchar(128) DEFAULT NULL, salt varchar(128) DEFAULT NULL, secret_question varchar(255) DEFAULT NULL, secret_answer varchar(255) DEFAULT NULL, creator int(11) NOT NULL DEFAULT '0', date_created datetime NOT NULL, changed_by int(11) DEFAULT NULL, date_changed datetime DEFAULT NULL, person_id int(11) NOT NULL, retired tinyint(1) NOT NULL DEFAULT '0', retired_by int(11) DEFAULT NULL, date_retired datetime DEFAULT NULL, retire_reason varchar(255) DEFAULT NULL, uuid char(38) NOT NULL, PRIMARY KEY (surrogate_id), KEY user_who_changed_user (changed_by), KEY user_creator (creator), KEY user_who_retired_this_user (retired_by), KEY person_id_for_user (person_id)) ENGINE=InnoDB DEFAULT CHARSET=utf8;
CREATE TABLE IF NOT EXISTS provider ( surrogate_id int(11) NOT NULL AUTO_INCREMENT, implementation_id int(11) NOT NULL, provider_id int(11) NOT NULL, person_id int(11) DEFAULT NULL, name varchar(255) DEFAULT NULL, identifier varchar(255) DEFAULT NULL, creator int(11) NOT NULL, date_created datetime NOT NULL, changed_by int(11) DEFAULT NULL, date_changed datetime DEFAULT NULL, retired tinyint(1) NOT NULL DEFAULT '0', retired_by int(11) DEFAULT NULL, date_retired datetime DEFAULT NULL, retire_reason varchar(255) DEFAULT NULL, uuid char(38) NOT NULL, PRIMARY KEY (surrogate_id), KEY uuid (uuid), KEY provider_changed_by_fk (changed_by), KEY provider_person_id_fk (person_id), KEY provider_retired_by_fk (retired_by), KEY provider_creator_fk (creator)) ENGINE=InnoDB DEFAULT CHARSET=utf8;
CREATE TABLE IF NOT EXISTS provider_attribute ( surrogate_id int(11) NOT NULL AUTO_INCREMENT, implementation_id int(11) NOT NULL, provider_attribute_id int(11) NOT NULL, provider_id int(11) NOT NULL, attribute_type_id int(11) NOT NULL, value_reference text NOT NULL, uuid char(38) NOT NULL, creator int(11) NOT NULL, date_created datetime NOT NULL, changed_by int(11) DEFAULT NULL, date_changed datetime DEFAULT NULL, voided tinyint(1) NOT NULL DEFAULT '0', voided_by int(11) DEFAULT NULL, date_voided datetime DEFAULT NULL, void_reason varchar(255) DEFAULT NULL, PRIMARY KEY (surrogate_id), KEY uuid (uuid), KEY provider_attribute_provider_fk (provider_id), KEY provider_attribute_attribute_type_id_fk (attribute_type_id), KEY provider_attribute_creator_fk (creator), KEY provider_attribute_changed_by_fk (changed_by), KEY provider_attribute_voided_by_fk (voided_by)) ENGINE=InnoDB DEFAULT CHARSET=utf8;
CREATE TABLE IF NOT EXISTS provider_attribute_type ( surrogate_id int(11) NOT NULL AUTO_INCREMENT, implementation_id int(11) NOT NULL, provider_attribute_type_id int(11) NOT NULL, name varchar(255) NOT NULL, description varchar(1024) DEFAULT NULL, datatype varchar(255) DEFAULT NULL, datatype_config text, preferred_handler varchar(255) DEFAULT NULL, handler_config text, min_occurs int(11) NOT NULL, max_occurs int(11) DEFAULT NULL, creator int(11) NOT NULL, date_created datetime NOT NULL, changed_by int(11) DEFAULT NULL, date_changed datetime DEFAULT NULL, retired tinyint(1) NOT NULL DEFAULT '0', retired_by int(11) DEFAULT NULL, date_retired datetime DEFAULT NULL, retire_reason varchar(255) DEFAULT NULL, uuid char(38) NOT NULL, PRIMARY KEY (surrogate_id), KEY uuid (uuid), KEY provider_attribute_type_creator_fk (creator), KEY provider_attribute_type_changed_by_fk (changed_by), KEY provider_attribute_type_retired_by_fk (retired_by)) ENGINE=InnoDB DEFAULT CHARSET=utf8;
CREATE TABLE IF NOT EXISTS role_privilege ( surrogate_id int(11) NOT NULL AUTO_INCREMENT, implementation_id int(11) NOT NULL, role varchar(50) NOT NULL DEFAULT '', privilege varchar(255) NOT NULL, PRIMARY KEY (surrogate_id), KEY role_privilege_to_role (role)) ENGINE=InnoDB DEFAULT CHARSET=utf8;
CREATE TABLE IF NOT EXISTS role_role ( surrogate_id int(11) NOT NULL AUTO_INCREMENT, implementation_id int(11) NOT NULL, parent_role varchar(50) NOT NULL DEFAULT '', child_role varchar(50) NOT NULL DEFAULT '', PRIMARY KEY (surrogate_id), KEY inherited_role (child_role)) ENGINE=InnoDB DEFAULT CHARSET=utf8;
CREATE TABLE IF NOT EXISTS user_property ( surrogate_id int(11) NOT NULL AUTO_INCREMENT, implementation_id int(11) NOT NULL, user_id int(11) NOT NULL DEFAULT '0', property varchar(100) NOT NULL DEFAULT '', property_value varchar(255) NOT NULL DEFAULT '', PRIMARY KEY (surrogate_id)) ENGINE=InnoDB DEFAULT CHARSET=utf8;
CREATE TABLE IF NOT EXISTS user_role ( surrogate_id int(11) NOT NULL AUTO_INCREMENT, implementation_id int(11) NOT NULL, user_id int(11) NOT NULL DEFAULT '0', role varchar(50) NOT NULL DEFAULT '', PRIMARY KEY (surrogate_id), KEY user_role_to_users (user_id)) ENGINE=InnoDB DEFAULT CHARSET=utf8;
CREATE TABLE IF NOT EXISTS location ( surrogate_id int(11) NOT NULL AUTO_INCREMENT, implementation_id int(11) NOT NULL, location_id int(11) NOT NULL, name varchar(255) NOT NULL DEFAULT '', description varchar(255) DEFAULT NULL, address1 varchar(255) DEFAULT NULL, address2 varchar(255) DEFAULT NULL, city_village varchar(255) DEFAULT NULL, state_province varchar(255) DEFAULT NULL, postal_code varchar(50) DEFAULT NULL, country varchar(50) DEFAULT NULL, latitude varchar(50) DEFAULT NULL, longitude varchar(50) DEFAULT NULL, creator int(11) NOT NULL DEFAULT '0', date_created datetime NOT NULL, county_district varchar(255) DEFAULT NULL, address3 varchar(255) DEFAULT NULL, address4 varchar(255) DEFAULT NULL, address5 varchar(255) DEFAULT NULL, address6 varchar(255) DEFAULT NULL, retired tinyint(1) NOT NULL DEFAULT '0', retired_by int(11) DEFAULT NULL, date_retired datetime DEFAULT NULL, retire_reason varchar(255) DEFAULT NULL, parent_location int(11) DEFAULT NULL, uuid char(38) NOT NULL, changed_by int(11) DEFAULT NULL, date_changed datetime DEFAULT NULL, PRIMARY KEY (surrogate_id), KEY location_uuid_index (uuid), KEY name_of_location (name), KEY location_retired_status (retired), KEY user_who_created_location (creator), KEY user_who_retired_location (retired_by), KEY parent_location (parent_location), KEY location_changed_by (changed_by)) ENGINE=InnoDB DEFAULT CHARSET=utf8;
CREATE TABLE IF NOT EXISTS location_attribute ( surrogate_id int(11) NOT NULL AUTO_INCREMENT, implementation_id int(11) NOT NULL, location_attribute_id int(11) NOT NULL, location_id int(11) NOT NULL, attribute_type_id int(11) NOT NULL, value_reference text NOT NULL, uuid char(38) NOT NULL, creator int(11) NOT NULL, date_created datetime NOT NULL, changed_by int(11) DEFAULT NULL, date_changed datetime DEFAULT NULL, voided tinyint(1) NOT NULL DEFAULT '0', voided_by int(11) DEFAULT NULL, date_voided datetime DEFAULT NULL, void_reason varchar(255) DEFAULT NULL, PRIMARY KEY (surrogate_id), KEY uuid (uuid), KEY location_attribute_location_fk (location_id), KEY location_attribute_attribute_type_id_fk (attribute_type_id), KEY location_attribute_creator_fk (creator), KEY location_attribute_changed_by_fk (changed_by), KEY location_attribute_voided_by_fk (voided_by)) ENGINE=InnoDB DEFAULT CHARSET=utf8;
CREATE TABLE IF NOT EXISTS location_attribute_type ( surrogate_id int(11) NOT NULL AUTO_INCREMENT, implementation_id int(11) NOT NULL, location_attribute_type_id int(11) NOT NULL, name varchar(255) NOT NULL, description varchar(1024) DEFAULT NULL, datatype varchar(255) DEFAULT NULL, datatype_config text, preferred_handler varchar(255) DEFAULT NULL, handler_config text, min_occurs int(11) NOT NULL, max_occurs int(11) DEFAULT NULL, creator int(11) NOT NULL, date_created datetime NOT NULL, changed_by int(11) DEFAULT NULL, date_changed datetime DEFAULT NULL, retired tinyint(1) NOT NULL DEFAULT '0', retired_by int(11) DEFAULT NULL, date_retired datetime DEFAULT NULL, retire_reason varchar(255) DEFAULT NULL, uuid char(38) NOT NULL, PRIMARY KEY (surrogate_id), KEY uuid (uuid), KEY location_attribute_type_unique_name (name), KEY location_attribute_type_creator_fk (creator), KEY location_attribute_type_changed_by_fk (changed_by), KEY location_attribute_type_retired_by_fk (retired_by)) ENGINE=InnoDB DEFAULT CHARSET=utf8;
CREATE TABLE IF NOT EXISTS location_tag ( surrogate_id int(11) NOT NULL AUTO_INCREMENT, implementation_id int(11) NOT NULL, location_tag_id int(11) NOT NULL, name varchar(50) NOT NULL, description varchar(255) DEFAULT NULL, creator int(11) NOT NULL, date_created datetime NOT NULL, retired tinyint(1) NOT NULL DEFAULT '0', retired_by int(11) DEFAULT NULL, date_retired datetime DEFAULT NULL, retire_reason varchar(255) DEFAULT NULL, uuid char(38) NOT NULL, changed_by int(11) DEFAULT NULL, date_changed datetime DEFAULT NULL, PRIMARY KEY (surrogate_id), KEY location_tag_uuid_index (uuid), KEY location_tag_creator (creator), KEY location_tag_retired_by (retired_by), KEY location_tag_changed_by (changed_by)) ENGINE=InnoDB DEFAULT CHARSET=utf8;
CREATE TABLE IF NOT EXISTS location_tag_map ( surrogate_id int(11) NOT NULL AUTO_INCREMENT, implementation_id int(11) NOT NULL, location_id int(11) NOT NULL, location_tag_id int(11) NOT NULL, PRIMARY KEY (surrogate_id), KEY location_tag_map_tag (location_tag_id)) ENGINE=InnoDB DEFAULT CHARSET=utf8;
CREATE TABLE IF NOT EXISTS concept_class ( surrogate_id int(11) NOT NULL AUTO_INCREMENT, implementation_id int(11) NOT NULL, concept_class_id int(11) NOT NULL, name varchar(255) NOT NULL DEFAULT '', description varchar(255) DEFAULT NULL, creator int(11) NOT NULL DEFAULT '0', date_created datetime NOT NULL DEFAULT '0000-00-00 00:00:00', retired tinyint(1) NOT NULL DEFAULT '0', retired_by int(11) DEFAULT NULL, date_retired datetime DEFAULT NULL, retire_reason varchar(255) DEFAULT NULL, uuid char(38) NOT NULL, PRIMARY KEY (surrogate_id), KEY concept_class_uuid_index (uuid), KEY concept_class_creator (creator), KEY user_who_retired_concept_class (retired_by), KEY concept_class_retired_status (retired)) ENGINE=InnoDB DEFAULT CHARSET=utf8;
CREATE TABLE IF NOT EXISTS concept_set ( surrogate_id int(11) NOT NULL AUTO_INCREMENT, implementation_id int(11) NOT NULL, concept_set_id int(11) NOT NULL, concept_id int(11) NOT NULL DEFAULT '0', concept_set int(11) NOT NULL DEFAULT '0', sort_weight double DEFAULT NULL, creator int(11) NOT NULL DEFAULT '0', date_created datetime NOT NULL DEFAULT '0000-00-00 00:00:00', uuid char(38) NOT NULL, PRIMARY KEY (surrogate_id), KEY concept_set_uuid_index (uuid), KEY has_a (concept_set), KEY user_who_created (creator), KEY idx_concept_set_concept (concept_id)) ENGINE=InnoDB DEFAULT CHARSET=utf8;
CREATE TABLE IF NOT EXISTS concept_datatype ( surrogate_id int(11) NOT NULL AUTO_INCREMENT, implementation_id int(11) NOT NULL, concept_datatype_id int(11) NOT NULL, name varchar(255) NOT NULL DEFAULT '', hl7_abbreviation varchar(3) DEFAULT NULL, description varchar(255) DEFAULT NULL, creator int(11) NOT NULL DEFAULT '0', date_created datetime NOT NULL DEFAULT '0000-00-00 00:00:00', retired tinyint(1) NOT NULL DEFAULT '0', retired_by int(11) DEFAULT NULL, date_retired datetime DEFAULT NULL, retire_reason varchar(255) DEFAULT NULL, uuid char(38) NOT NULL, PRIMARY KEY (surrogate_id), KEY concept_datatype_uuid_index (uuid), KEY concept_datatype_creator (creator), KEY user_who_retired_concept_datatype (retired_by), KEY concept_datatype_retired_status (retired)) ENGINE=InnoDB DEFAULT CHARSET=utf8;
CREATE TABLE IF NOT EXISTS concept_map_type ( surrogate_id int(11) NOT NULL AUTO_INCREMENT, implementation_id int(11) NOT NULL, concept_map_type_id int(11) NOT NULL, name varchar(255) CHARACTER SET utf8 NOT NULL, description varchar(255) CHARACTER SET utf8 DEFAULT NULL, creator int(11) NOT NULL, date_created datetime NOT NULL, changed_by int(11) DEFAULT NULL, date_changed datetime DEFAULT NULL, is_hidden tinyint(1) DEFAULT NULL, retired tinyint(1) NOT NULL DEFAULT '0', retired_by int(11) DEFAULT NULL, date_retired datetime DEFAULT NULL, retire_reason varchar(255) CHARACTER SET utf8 DEFAULT NULL, uuid char(38) CHARACTER SET utf8 NOT NULL, PRIMARY KEY (surrogate_id), KEY name (name), KEY uuid (uuid), KEY mapped_user_creator_concept_map_type (creator), KEY mapped_user_changed_concept_map_type (changed_by), KEY mapped_user_retired_concept_map_type (retired_by)) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_bin;
CREATE TABLE IF NOT EXISTS concept_stop_word ( surrogate_id int(11) NOT NULL AUTO_INCREMENT, implementation_id int(11) NOT NULL, concept_stop_word_id int(11) NOT NULL, word varchar(50) CHARACTER SET utf8 NOT NULL, locale varchar(50) CHARACTER SET utf8 DEFAULT NULL, uuid char(38) CHARACTER SET utf8 NOT NULL, PRIMARY KEY (surrogate_id), KEY uuid (uuid), KEY Unique_StopWord_Key (word,locale)) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_bin;
CREATE TABLE IF NOT EXISTS concept ( surrogate_id int(11) NOT NULL AUTO_INCREMENT, implementation_id int(11) NOT NULL, concept_id int(11) NOT NULL, retired tinyint(1) NOT NULL DEFAULT '0', short_name varchar(255) DEFAULT NULL, description text, form_text text, datatype_id int(11) NOT NULL DEFAULT '0', class_id int(11) NOT NULL DEFAULT '0', is_set tinyint(1) NOT NULL DEFAULT '0', creator int(11) NOT NULL DEFAULT '0', date_created datetime NOT NULL DEFAULT '0000-00-00 00:00:00', version varchar(50) DEFAULT NULL, changed_by int(11) DEFAULT NULL, date_changed datetime DEFAULT NULL, retired_by int(11) DEFAULT NULL, date_retired datetime DEFAULT NULL, retire_reason varchar(255) DEFAULT NULL, uuid char(38) NOT NULL, PRIMARY KEY (surrogate_id), KEY concept_uuid_index (uuid), KEY concept_classes (class_id), KEY concept_creator (creator), KEY concept_datatypes (datatype_id), KEY user_who_changed_concept (changed_by), KEY concept_code (version), KEY concept_ndx (version), KEY user_who_retired_concept (retired_by)) ENGINE=InnoDB DEFAULT CHARSET=utf8;
CREATE TABLE IF NOT EXISTS concept_name ( surrogate_id int(11) NOT NULL AUTO_INCREMENT, implementation_id int(11) NOT NULL, concept_id int(11) DEFAULT NULL, name varchar(255) NOT NULL DEFAULT '', locale varchar(50) NOT NULL DEFAULT '', creator int(11) NOT NULL DEFAULT '0', date_created datetime NOT NULL DEFAULT '0000-00-00 00:00:00', concept_name_id int(11) NOT NULL, voided tinyint(1) NOT NULL DEFAULT '0', voided_by int(11) DEFAULT NULL, date_voided datetime DEFAULT NULL, void_reason varchar(255) DEFAULT NULL, uuid char(38) NOT NULL, concept_name_type varchar(50) DEFAULT NULL, locale_preferred tinyint(1) DEFAULT '0', PRIMARY KEY (surrogate_id), KEY concept_name_id (concept_name_id), KEY concept_name_uuid_index (uuid), KEY user_who_created_name (creator), KEY name_of_concept (name), KEY concept_id (concept_id), KEY unique_concept_name_id (concept_id), KEY user_who_voided_name (voided_by)) ENGINE=InnoDB DEFAULT CHARSET=utf8;
CREATE TABLE IF NOT EXISTS concept_description ( surrogate_id int(11) NOT NULL AUTO_INCREMENT, implementation_id int(11) NOT NULL, concept_description_id int(11) NOT NULL, concept_id int(11) NOT NULL DEFAULT '0', description text NOT NULL, locale varchar(50) NOT NULL DEFAULT '', creator int(11) NOT NULL DEFAULT '0', date_created datetime NOT NULL DEFAULT '0000-00-00 00:00:00', changed_by int(11) DEFAULT NULL, date_changed datetime DEFAULT NULL, uuid char(38) NOT NULL, PRIMARY KEY (surrogate_id), KEY concept_description_uuid_index (uuid), KEY concept_being_described (concept_id), KEY user_who_created_description (creator), KEY user_who_changed_description (changed_by)) ENGINE=InnoDB DEFAULT CHARSET=utf8;
CREATE TABLE IF NOT EXISTS concept_answer ( surrogate_id int(11) NOT NULL AUTO_INCREMENT, implementation_id int(11) NOT NULL, concept_answer_id int(11) NOT NULL, concept_id int(11) NOT NULL DEFAULT '0', answer_concept int(11) DEFAULT NULL, answer_drug int(11) DEFAULT NULL, creator int(11) NOT NULL DEFAULT '0', date_created datetime NOT NULL DEFAULT '0000-00-00 00:00:00', uuid char(38) NOT NULL, sort_weight double DEFAULT NULL, PRIMARY KEY (surrogate_id), KEY concept_answer_uuid_index (uuid), KEY answer_creator (creator), KEY answer (answer_concept), KEY answers_for_concept (concept_id), KEY answer_answer_drug_fk (answer_drug)) ENGINE=InnoDB DEFAULT CHARSET=utf8;
CREATE TABLE IF NOT EXISTS concept_numeric ( surrogate_id int(11) NOT NULL AUTO_INCREMENT, implementation_id int(11) NOT NULL, concept_id int(11) NOT NULL DEFAULT '0', hi_absolute double DEFAULT NULL, hi_critical double DEFAULT NULL, hi_normal double DEFAULT NULL, low_absolute double DEFAULT NULL, low_critical double DEFAULT NULL, low_normal double DEFAULT NULL, units varchar(50) DEFAULT NULL, precise tinyint(1) NOT NULL DEFAULT '0', display_precision int(11) DEFAULT NULL, PRIMARY KEY (surrogate_id), KEY concept_id_index (concept_id)) ENGINE=InnoDB DEFAULT CHARSET=utf8;
CREATE TABLE IF NOT EXISTS concept_reference_map ( surrogate_id int(11) NOT NULL AUTO_INCREMENT, implementation_id int(11) NOT NULL, concept_map_id int(11) NOT NULL, creator int(11) NOT NULL DEFAULT '0', date_created datetime NOT NULL DEFAULT '0000-00-00 00:00:00', concept_id int(11) NOT NULL DEFAULT '0', uuid char(38) NOT NULL, concept_reference_term_id int(11) NOT NULL, concept_map_type_id int(11) NOT NULL DEFAULT '1', changed_by int(11) DEFAULT NULL, date_changed datetime DEFAULT NULL, PRIMARY KEY (surrogate_id), KEY concept_map_uuid_index (uuid), KEY map_creator (creator), KEY map_for_concept (concept_id), KEY mapped_concept_map_type (concept_map_type_id), KEY mapped_user_changed_ref_term (changed_by), KEY mapped_concept_reference_term (concept_reference_term_id)) ENGINE=InnoDB DEFAULT CHARSET=utf8;
CREATE TABLE IF NOT EXISTS concept_reference_term ( surrogate_id int(11) NOT NULL AUTO_INCREMENT, implementation_id int(11) NOT NULL, concept_reference_term_id int(11) NOT NULL, concept_source_id int(11) NOT NULL, name varchar(255) CHARACTER SET utf8 DEFAULT NULL, code varchar(255) CHARACTER SET utf8 NOT NULL, version varchar(255) CHARACTER SET utf8 DEFAULT NULL, description varchar(255) CHARACTER SET utf8 DEFAULT NULL, creator int(11) NOT NULL, date_created datetime NOT NULL, date_changed datetime DEFAULT NULL, changed_by int(11) DEFAULT NULL, retired tinyint(1) NOT NULL DEFAULT '0', retired_by int(11) DEFAULT NULL, date_retired datetime DEFAULT NULL, retire_reason varchar(255) CHARACTER SET utf8 DEFAULT NULL, uuid char(38) CHARACTER SET utf8 NOT NULL, PRIMARY KEY (surrogate_id), KEY uuid (uuid), KEY mapped_user_creator (creator), KEY mapped_user_changed (changed_by), KEY mapped_user_retired (retired_by), KEY mapped_concept_source (concept_source_id), KEY idx_code_concept_reference_term (code)) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_bin;
CREATE TABLE IF NOT EXISTS concept_reference_term_map ( surrogate_id int(11) NOT NULL AUTO_INCREMENT, implementation_id int(11) NOT NULL, concept_reference_term_map_id int(11) NOT NULL, term_a_id int(11) NOT NULL, term_b_id int(11) NOT NULL, a_is_to_b_id int(11) NOT NULL, creator int(11) NOT NULL, date_created datetime NOT NULL, changed_by int(11) DEFAULT NULL, date_changed datetime DEFAULT NULL, uuid char(38) CHARACTER SET utf8 NOT NULL, PRIMARY KEY (surrogate_id), KEY uuid (uuid), KEY mapped_term_a (term_a_id), KEY mapped_term_b (term_b_id), KEY mapped_concept_map_type_ref_term_map (a_is_to_b_id), KEY mapped_user_creator_ref_term_map (creator), KEY mapped_user_changed_ref_term_map (changed_by)) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_bin;
CREATE TABLE IF NOT EXISTS concept_reference_source ( surrogate_id int(11) NOT NULL AUTO_INCREMENT, implementation_id int(11) NOT NULL, concept_source_id int(11) NOT NULL, name varchar(50) NOT NULL DEFAULT '', description text NOT NULL, hl7_code varchar(50) DEFAULT NULL, creator int(11) NOT NULL DEFAULT '0', date_created datetime NOT NULL DEFAULT '0000-00-00 00:00:00', retired tinyint(1) NOT NULL DEFAULT '0', retired_by int(11) DEFAULT NULL, date_retired datetime DEFAULT NULL, retire_reason varchar(255) DEFAULT NULL, uuid char(38) NOT NULL, PRIMARY KEY (surrogate_id), KEY concept_source_uuid_index (uuid), KEY concept_source_unique_hl7_codes (hl7_code), KEY concept_source_creator (creator), KEY user_who_voided_concept_source (retired_by), KEY unique_hl7_code (hl7_code,retired)) ENGINE=InnoDB DEFAULT CHARSET=utf8;
CREATE TABLE IF NOT EXISTS patient ( surrogate_id int(11) NOT NULL AUTO_INCREMENT, implementation_id int(11) NOT NULL, patient_id int(11) NOT NULL, creator int(11) NOT NULL DEFAULT '0', date_created datetime NOT NULL, changed_by int(11) DEFAULT NULL, date_changed datetime DEFAULT NULL, voided tinyint(1) NOT NULL DEFAULT '0', voided_by int(11) DEFAULT NULL, date_voided datetime DEFAULT NULL, void_reason varchar(255) DEFAULT NULL, PRIMARY KEY (surrogate_id), KEY user_who_changed_pat (changed_by), KEY user_who_created_patient (creator), KEY user_who_voided_patient (voided_by)) ENGINE=InnoDB DEFAULT CHARSET=utf8;
CREATE TABLE IF NOT EXISTS patient_identifier ( surrogate_id int(11) NOT NULL AUTO_INCREMENT, implementation_id int(11) NOT NULL, patient_identifier_id int(11) NOT NULL, patient_id int(11) NOT NULL DEFAULT '0', identifier varchar(50) NOT NULL DEFAULT '', identifier_type int(11) NOT NULL DEFAULT '0', preferred tinyint(1) NOT NULL DEFAULT '0', location_id int(11) DEFAULT '0', creator int(11) NOT NULL DEFAULT '0', date_created datetime NOT NULL, date_changed datetime DEFAULT NULL, changed_by int(11) DEFAULT NULL, voided tinyint(1) NOT NULL DEFAULT '0', voided_by int(11) DEFAULT NULL, date_voided datetime DEFAULT NULL, void_reason varchar(255) DEFAULT NULL, uuid char(38) NOT NULL, PRIMARY KEY (surrogate_id), KEY patient_identifier_uuid_index (uuid), KEY identifier_name (identifier), KEY idx_patient_identifier_patient (patient_id), KEY identifier_creator (creator), KEY defines_identifier_type (identifier_type), KEY patient_identifier_ibfk_2 (location_id), KEY identifier_voider (voided_by), KEY patient_identifier_changed_by (changed_by)) ENGINE=InnoDB DEFAULT CHARSET=utf8;
CREATE TABLE IF NOT EXISTS patient_identifier_type ( surrogate_id int(11) NOT NULL AUTO_INCREMENT, implementation_id int(11) NOT NULL, patient_identifier_type_id int(11) NOT NULL, name varchar(50) NOT NULL DEFAULT '', description text, format varchar(255) DEFAULT NULL, check_digit tinyint(1) NOT NULL DEFAULT '0', creator int(11) NOT NULL DEFAULT '0', date_created datetime NOT NULL, required tinyint(1) NOT NULL DEFAULT '0', format_description varchar(255) DEFAULT NULL, validator varchar(200) DEFAULT NULL, location_behavior varchar(50) DEFAULT NULL, retired tinyint(1) NOT NULL DEFAULT '0', retired_by int(11) DEFAULT NULL, date_retired datetime DEFAULT NULL, retire_reason varchar(255) DEFAULT NULL, uuid char(38) NOT NULL, uniqueness_behavior varchar(50) DEFAULT NULL, PRIMARY KEY (surrogate_id), KEY patient_identifier_type_uuid_index (uuid), KEY patient_identifier_type_retired_status (retired), KEY type_creator (creator), KEY user_who_retired_patient_identifier_type (retired_by)) ENGINE=InnoDB DEFAULT CHARSET=utf8;
CREATE TABLE IF NOT EXISTS patient_program ( surrogate_id int(11) NOT NULL AUTO_INCREMENT, implementation_id int(11) NOT NULL, patient_program_id int(11) NOT NULL, patient_id int(11) NOT NULL DEFAULT '0', program_id int(11) NOT NULL DEFAULT '0', date_enrolled datetime DEFAULT NULL, date_completed datetime DEFAULT NULL, location_id int(11) DEFAULT NULL, outcome_concept_id int(11) DEFAULT NULL, creator int(11) NOT NULL DEFAULT '0', date_created datetime NOT NULL, changed_by int(11) DEFAULT NULL, date_changed datetime DEFAULT NULL, voided tinyint(1) NOT NULL DEFAULT '0', voided_by int(11) DEFAULT NULL, date_voided datetime DEFAULT NULL, void_reason varchar(255) DEFAULT NULL, uuid char(38) NOT NULL, PRIMARY KEY (surrogate_id), KEY patient_program_uuid_index (uuid), KEY user_who_changed (changed_by), KEY patient_program_creator (creator), KEY patient_in_program (patient_id), KEY program_for_patient (program_id), KEY user_who_voided_patient_program (voided_by), KEY patient_program_location_id (location_id), KEY patient_program_outcome_concept_id_fk (outcome_concept_id)) ENGINE=InnoDB DEFAULT CHARSET=utf8;
CREATE TABLE IF NOT EXISTS patient_state ( surrogate_id int(11) NOT NULL AUTO_INCREMENT, implementation_id int(11) NOT NULL, patient_state_id int(11) NOT NULL, patient_program_id int(11) NOT NULL DEFAULT '0', state int(11) NOT NULL DEFAULT '0', start_date date DEFAULT NULL, end_date date DEFAULT NULL, creator int(11) NOT NULL DEFAULT '0', date_created datetime NOT NULL, changed_by int(11) DEFAULT NULL, date_changed datetime DEFAULT NULL, voided tinyint(1) NOT NULL DEFAULT '0', voided_by int(11) DEFAULT NULL, date_voided datetime DEFAULT NULL, void_reason varchar(255) DEFAULT NULL, uuid char(38) NOT NULL, PRIMARY KEY (surrogate_id), KEY patient_state_uuid_index (uuid), KEY patient_state_changer (changed_by), KEY patient_state_creator (creator), KEY patient_program_for_state (patient_program_id), KEY state_for_patient (state), KEY patient_state_voider (voided_by)) ENGINE=InnoDB DEFAULT CHARSET=utf8;
CREATE TABLE IF NOT EXISTS form ( surrogate_id int(11) NOT NULL AUTO_INCREMENT, implementation_id int(11) NOT NULL, form_id int(11) NOT NULL, name varchar(255) NOT NULL DEFAULT '', version varchar(50) NOT NULL DEFAULT '', build int(11) DEFAULT NULL, published tinyint(1) NOT NULL DEFAULT '0', xslt text, template text, description text, encounter_type int(11) DEFAULT NULL, creator int(11) NOT NULL DEFAULT '0', date_created datetime NOT NULL, changed_by int(11) DEFAULT NULL, date_changed datetime DEFAULT NULL, retired tinyint(1) NOT NULL DEFAULT '0', retired_by int(11) DEFAULT NULL, date_retired datetime DEFAULT NULL, retired_reason varchar(255) DEFAULT NULL, uuid char(38) NOT NULL, PRIMARY KEY (surrogate_id), KEY form_uuid_index (uuid), KEY form_published_index (published), KEY form_retired_index (retired), KEY form_published_and_retired_index (published,retired), KEY user_who_last_changed_form (changed_by), KEY user_who_created_form (creator), KEY form_encounter_type (encounter_type), KEY user_who_retired_form (retired_by)) ENGINE=InnoDB DEFAULT CHARSET=utf8;
CREATE TABLE IF NOT EXISTS encounter ( surrogate_id int(11) NOT NULL AUTO_INCREMENT, implementation_id int(11) NOT NULL, encounter_id int(11) NOT NULL, encounter_type int(11) NOT NULL, patient_id int(11) NOT NULL DEFAULT '0', location_id int(11) DEFAULT NULL, form_id int(11) DEFAULT NULL, encounter_datetime datetime NOT NULL, creator int(11) NOT NULL DEFAULT '0', date_created datetime NOT NULL, voided tinyint(1) NOT NULL DEFAULT '0', voided_by int(11) DEFAULT NULL, date_voided datetime DEFAULT NULL, void_reason varchar(255) DEFAULT NULL, changed_by int(11) DEFAULT NULL, date_changed datetime DEFAULT NULL, visit_id int(11) DEFAULT NULL, uuid char(38) NOT NULL, PRIMARY KEY (surrogate_id), KEY encounter_uuid_index (uuid), KEY encounter_datetime_idx (encounter_datetime), KEY encounter_ibfk_1 (creator), KEY encounter_type_id (encounter_type), KEY encounter_form (form_id), KEY encounter_location (location_id), KEY encounter_patient (patient_id), KEY user_who_voided_encounter (voided_by), KEY encounter_changed_by (changed_by), KEY encounter_visit_id_fk (visit_id)) ENGINE=InnoDB DEFAULT CHARSET=utf8;
CREATE TABLE IF NOT EXISTS encounter_provider ( surrogate_id int(11) NOT NULL AUTO_INCREMENT, implementation_id int(11) NOT NULL, encounter_provider_id int(11) NOT NULL, encounter_id int(11) NOT NULL, provider_id int(11) NOT NULL, encounter_role_id int(11) NOT NULL, creator int(11) NOT NULL DEFAULT '0', date_created datetime NOT NULL, changed_by int(11) DEFAULT NULL, date_changed datetime DEFAULT NULL, voided tinyint(1) NOT NULL DEFAULT '0', date_voided datetime DEFAULT NULL, voided_by int(11) DEFAULT NULL, void_reason varchar(255) DEFAULT NULL, uuid char(38) NOT NULL, PRIMARY KEY (surrogate_id), KEY uuid (uuid), KEY encounter_id_fk (encounter_id), KEY provider_id_fk (provider_id), KEY encounter_role_id_fk (encounter_role_id), KEY encounter_provider_creator (creator), KEY encounter_provider_changed_by (changed_by), KEY encounter_provider_voided_by (voided_by)) ENGINE=InnoDB DEFAULT CHARSET=utf8;
CREATE TABLE IF NOT EXISTS encounter_role ( surrogate_id int(11) NOT NULL AUTO_INCREMENT, implementation_id int(11) NOT NULL, encounter_role_id int(11) NOT NULL, name varchar(255) NOT NULL, description varchar(1024) DEFAULT NULL, creator int(11) NOT NULL, date_created datetime NOT NULL, changed_by int(11) DEFAULT NULL, date_changed datetime DEFAULT NULL, retired tinyint(1) NOT NULL DEFAULT '0', retired_by int(11) DEFAULT NULL, date_retired datetime DEFAULT NULL, retire_reason varchar(255) DEFAULT NULL, uuid char(38) NOT NULL, PRIMARY KEY (surrogate_id), KEY uuid (uuid), KEY encounter_role_unique_name (name), KEY encounter_role_creator_fk (creator), KEY encounter_role_changed_by_fk (changed_by), KEY encounter_role_retired_by_fk (retired_by)) ENGINE=InnoDB DEFAULT CHARSET=utf8;
CREATE TABLE IF NOT EXISTS encounter_type ( surrogate_id int(11) NOT NULL AUTO_INCREMENT, implementation_id int(11) NOT NULL, encounter_type_id int(11) NOT NULL, name varchar(50) NOT NULL DEFAULT '', description text, creator int(11) NOT NULL DEFAULT '0', date_created datetime NOT NULL, retired tinyint(1) NOT NULL DEFAULT '0', retired_by int(11) DEFAULT NULL, date_retired datetime DEFAULT NULL, retire_reason varchar(255) DEFAULT NULL, uuid char(38) NOT NULL, edit_privilege varchar(255) DEFAULT NULL, view_privilege varchar(255) DEFAULT NULL, PRIMARY KEY (surrogate_id), KEY encounter_type_unique_name (name), KEY encounter_type_uuid_index (uuid), KEY encounter_type_retired_status (retired), KEY user_who_created_type (creator), KEY user_who_retired_encounter_type (retired_by), KEY privilege_which_can_view_encounter_type (view_privilege), KEY privilege_which_can_edit_encounter_type (edit_privilege)) ENGINE=InnoDB DEFAULT CHARSET=utf8;
CREATE TABLE IF NOT EXISTS obs ( surrogate_id int(11) NOT NULL AUTO_INCREMENT, implementation_id int(11) NOT NULL, obs_id int(11) NOT NULL, person_id int(11) NOT NULL, concept_id int(11) NOT NULL DEFAULT '0', encounter_id int(11) DEFAULT NULL, order_id int(11) DEFAULT NULL, obs_datetime datetime NOT NULL, location_id int(11) DEFAULT NULL, obs_group_id int(11) DEFAULT NULL, accession_number varchar(255) DEFAULT NULL, value_group_id int(11) DEFAULT NULL, value_boolean tinyint(1) DEFAULT NULL, value_coded int(11) DEFAULT NULL, value_coded_name_id int(11) DEFAULT NULL, value_drug int(11) DEFAULT NULL, value_datetime datetime DEFAULT NULL, value_numeric double DEFAULT NULL, value_modifier varchar(2) DEFAULT NULL, value_text text, value_complex varchar(255) DEFAULT NULL, comments varchar(255) DEFAULT NULL, creator int(11) NOT NULL DEFAULT '0', date_created datetime NOT NULL, voided tinyint(1) NOT NULL DEFAULT '0', voided_by int(11) DEFAULT NULL, date_voided datetime DEFAULT NULL, void_reason varchar(255) DEFAULT NULL, uuid char(38) NOT NULL, previous_version int(11) DEFAULT NULL, form_namespace_and_path varchar(255) DEFAULT NULL, PRIMARY KEY (surrogate_id), KEY obs_uuid_index (uuid), KEY obs_datetime_idx (obs_datetime), KEY obs_concept (concept_id), KEY obs_enterer (creator), KEY encounter_observations (encounter_id), KEY obs_location (location_id), KEY obs_grouping_id (obs_group_id), KEY obs_order (order_id), KEY person_obs (person_id), KEY answer_concept (value_coded), KEY obs_name_of_coded_value (value_coded_name_id), KEY answer_concept_drug (value_drug), KEY user_who_voided_obs (voided_by), KEY previous_version (previous_version)) ENGINE=InnoDB DEFAULT CHARSET=utf8;
CREATE TABLE IF NOT EXISTS visit_type(surrogate_id int(11) NOT NULL AUTO_INCREMENT,   implementation_id int(11) NOT NULL,   visit_type_id int(11) NOT NULL DEFAULT '0' ,  name varchar(255) NOT NULL,  description varchar(1024) DEFAULT NULL,  creator int(11) NOT NULL,  date_created datetime NOT NULL,  changed_by int(11) DEFAULT NULL,  date_changed datetime DEFAULT NULL,  retired tinyint(1) NOT NULL DEFAULT '0',  retired_by int(11) DEFAULT NULL,  date_retired datetime DEFAULT NULL,  retire_reason varchar(255) DEFAULT NULL,  uuid char(38) NOT NULL,  PRIMARY KEY (surrogate_id),  KEY uuid (uuid),  KEY visit_type_creator (creator),  KEY visit_type_changed_by (changed_by),  KEY visit_type_retired_by (retired_by)) ENGINE=InnoDB  DEFAULT CHARSET=utf8;
CREATE TABLE IF NOT EXISTS visit_attribute_type (surrogate_id int(11) NOT NULL AUTO_INCREMENT,   implementation_id int(11) NOT NULL,   visit_attribute_type_id int(11) NOT NULL,  name varchar(255) NOT NULL,  description varchar(1024) DEFAULT NULL,  datatype varchar(255) DEFAULT NULL,  datatype_config text,  preferred_handler varchar(255) DEFAULT NULL,  handler_config text,  min_occurs int(11) NOT NULL,  max_occurs int(11) DEFAULT NULL,  creator int(11) NOT NULL,  date_created datetime NOT NULL,  changed_by int(11) DEFAULT NULL,  date_changed datetime DEFAULT NULL,  retired tinyint(1) NOT NULL DEFAULT '0',  retired_by int(11) DEFAULT NULL,  date_retired datetime DEFAULT NULL,  retire_reason varchar(255) DEFAULT NULL,  uuid char(38) NOT NULL,  PRIMARY KEY (surrogate_id),  KEY uuid (uuid),  KEY visit_attribute_type_creator_fk (creator),  KEY visit_attribute_type_changed_by_fk (changed_by),  KEY visit_attribute_type_retired_by_fk (retired_by)) ENGINE=InnoDB DEFAULT CHARSET=utf8; 
CREATE TABLE IF NOT EXISTS visit_attribute (surrogate_id int(11) NOT NULL AUTO_INCREMENT,   implementation_id int(11) NOT NULL,   visit_attribute_id int(11) NOT NULL,  visit_id int(11) NOT NULL,  attribute_type_id int(11) NOT NULL,  value_reference text NOT NULL,  uuid char(38) NOT NULL,  creator int(11) NOT NULL,  date_created datetime NOT NULL,  changed_by int(11) DEFAULT NULL,  date_changed datetime DEFAULT NULL,  voided tinyint(1) NOT NULL DEFAULT '0',  voided_by int(11) DEFAULT NULL,  date_voided datetime DEFAULT NULL,  void_reason varchar(255) DEFAULT NULL,  PRIMARY KEY (surrogate_id),  KEY uuid (uuid),  KEY visit_attribute_visit_fk (visit_id),  KEY visit_attribute_attribute_type_id_fk (attribute_type_id),  KEY visit_attribute_creator_fk (creator),  KEY visit_attribute_changed_by_fk (changed_by),  KEY visit_attribute_voided_by_fk (voided_by)) ENGINE=InnoDB DEFAULT CHARSET=utf8; 
CREATE TABLE IF NOT EXISTS visit(surrogate_id int(11) NOT NULL AUTO_INCREMENT,   implementation_id int(11) NOT NULL,   visit_id int(11) NOT NULL,  patient_id int(11) NOT NULL,  visit_type_id int(11) NOT NULL,  date_started datetime NOT NULL,  date_stopped datetime DEFAULT NULL,  indication_concept_id int(11) DEFAULT NULL,  location_id int(11) DEFAULT NULL,  creator int(11) NOT NULL,  date_created datetime NOT NULL,  changed_by int(11) DEFAULT NULL,  date_changed datetime DEFAULT NULL,  voided tinyint(1) NOT NULL DEFAULT '0',  voided_by int(11) DEFAULT NULL,  date_voided datetime DEFAULT NULL,  void_reason varchar(255) DEFAULT NULL,  uuid char(38) NOT NULL,  PRIMARY KEY (surrogate_id),  KEY uuid (uuid),  KEY visit_patient_index (patient_id),  KEY visit_type_fk (visit_type_id),  KEY visit_location_fk (location_id),  KEY visit_creator_fk (creator),  KEY visit_voided_by_fk (voided_by),  KEY visit_changed_by_fk (changed_by),  KEY visit_indication_concept_fk (indication_concept_id)) ENGINE=InnoDB  DEFAULT CHARSET=utf8;
CREATE TABLE IF NOT EXISTS field(surrogate_id int(11) NOT NULL AUTO_INCREMENT,implementation_id int(11) NOT NULL,   field_id int(11) NOT NULL ,  name varchar(255) NOT NULL DEFAULT '',  description text,  field_type int(11) DEFAULT NULL,  concept_id int(11) DEFAULT NULL,  table_name varchar(50) DEFAULT NULL,  attribute_name varchar(50) DEFAULT NULL,  default_value text,  select_multiple tinyint(1) NOT NULL DEFAULT '0',  creator int(11) NOT NULL DEFAULT '0',  date_created datetime NOT NULL,  changed_by int(11) DEFAULT NULL,  date_changed datetime DEFAULT NULL,  retired tinyint(1) NOT NULL DEFAULT '0',  retired_by int(11) DEFAULT NULL,  date_retired datetime DEFAULT NULL,  retire_reason varchar(255) DEFAULT NULL,  uuid char(38) DEFAULT NULL,  PRIMARY KEY (surrogate_id),  KEY field_uuid_index (uuid),  KEY field_retired_status (retired),  KEY user_who_changed_field (changed_by),  KEY concept_for_field (concept_id),  KEY user_who_created_field(creator),  KEY type_of_field (field_type),  KEY user_who_retired_field (retired_by)) ENGINE=InnoDB AUTO_INCREMENT=5 DEFAULT CHARSET=utf8;
CREATE TABLE IF NOT EXISTS field_answer(surrogate_id int(11) NOT NULL AUTO_INCREMENT,   implementation_id int(11) NOT NULL,   field_id int(11) NOT NULL DEFAULT '0',  answer_id int(11) NOT NULL DEFAULT '0',  creator int(11) NOT NULL DEFAULT '0',  date_created datetime NOT NULL,  uuid char(38) DEFAULT NULL,  PRIMARY KEY (surrogate_id),  KEY field_answer_uuid_index (uuid),  KEY field_answer_concept (answer_id),  KEY user_who_created_field_answer (creator)) ENGINE=InnoDB DEFAULT CHARSET=utf8;
CREATE TABLE IF NOT EXISTS field_type(surrogate_id int(11) NOT NULL AUTO_INCREMENT,   implementation_id int(11) NOT NULL,   field_type_id int(11) NOT NULL,  name varchar(50) DEFAULT NULL,  description text,  is_set tinyint(1) NOT NULL DEFAULT '0',  creator int(11) NOT NULL DEFAULT '0',  date_created datetime NOT NULL,  uuid char(38) DEFAULT NULL,  PRIMARY KEY (surrogate_id),  KEY field_type_uuid_index (uuid),  KEY user_who_created_field_type (creator)) ENGINE=InnoDB AUTO_INCREMENT=6 DEFAULT CHARSET=utf8;
CREATE TABLE IF NOT EXISTS form_field(surrogate_id int(11) NOT NULL AUTO_INCREMENT,   implementation_id int(11) NOT NULL,  form_field_id int(11) NOT NULL ,  form_id int(11) NOT NULL DEFAULT '0',  field_id int(11) NOT NULL DEFAULT '0',  field_number int(11) DEFAULT NULL,  field_part varchar(5) DEFAULT NULL,  page_number int(11) DEFAULT NULL,  parent_form_field int(11) DEFAULT NULL,  min_occurs int(11) DEFAULT NULL,  max_occurs int(11) DEFAULT NULL,  required tinyint(1) NOT NULL DEFAULT '0',  changed_by int(11) DEFAULT NULL,  date_changed datetime DEFAULT NULL,  creator int(11) NOT NULL DEFAULT '0',  date_created datetime NOT NULL,  sort_weight double DEFAULT NULL,  uuid char(38) DEFAULT NULL,  PRIMARY KEY (surrogate_id),  KEY form_field_uuid_index (uuid),  KEY user_who_last_changed_form_field (changed_by),  KEY user_who_created_form_field (creator),  KEY field_within_form (field_id),  KEY form_containing_field (form_id),  KEY form_field_hierarchy (parent_form_field)) ENGINE=InnoDB DEFAULT CHARSET=utf8;
-- Dimension tables
CREATE TABLE IF NOT EXISTS dim_datetime ( datetime_id bigint(21) NOT NULL AUTO_INCREMENT, full_date varchar(50) NOT NULL, year int(11) NOT NULL, month int(11) NOT NULL, date int(11) NOT NULL, day_name varchar(50) NOT NULL, month_name varchar(50) NOT NULL, PRIMARY KEY (datetime_id), KEY full_date (full_date)) ENGINE=InnoDB DEFAULT CHARSET=utf8;
CREATE TABLE IF NOT EXISTS dim_concept ( surrogate_id bigint(21) NOT NULL, implementation_id int(11) NOT NULL DEFAULT '0', concept_id int(11) NOT NULL, full_name varchar(255) DEFAULT '', short_name varchar(255) DEFAULT '', default_name varchar(255) DEFAULT '', description text, retired tinyint(1) NOT NULL DEFAULT '0', data_type varchar(255) NOT NULL DEFAULT '', class varchar(255) NOT NULL DEFAULT '', hi_absolute int(11), hi_critical int(11), hi_normal int(11), low_absolute int(11), low_critical int(11), low_normal int(11), creator int(11) NOT NULL DEFAULT '0', date_created datetime NOT NULL, version VARCHAR(50) DEFAULT NULL, changed_by int(11) DEFAULT NULL, date_changed datetime DEFAULT NULL, uuid char(38) DEFAULT NULL, PRIMARY KEY (surrogate_id), KEY concept_id (concept_id), KEY uuid_unique (uuid)) ENGINE=InnoDB DEFAULT CHARSET=utf8;
CREATE TABLE IF NOT EXISTS dim_location ( surrogate_id bigint(21) NOT NULL, implementation_id int(11) NOT NULL DEFAULT '0', location_id int(11) NOT NULL, location_name varchar(255) NOT NULL DEFAULT '', description varchar(255) DEFAULT NULL, address1 varchar(255) DEFAULT NULL, address2 varchar(255) DEFAULT NULL, city_village varchar(255) DEFAULT NULL, state_province varchar(255) DEFAULT NULL, postal_code varchar(50) DEFAULT NULL, country varchar(50) DEFAULT NULL, latitude varchar(50) DEFAULT NULL, longitude varchar(50) DEFAULT NULL, creator int(11) NOT NULL DEFAULT '0', date_created datetime NOT NULL, retired tinyint(1) NOT NULL DEFAULT '0', parent_location int(11) DEFAULT NULL, uuid char(38) DEFAULT NULL, PRIMARY KEY (surrogate_id), KEY location_id (location_id), KEY uuid_unique (uuid)) ENGINE=InnoDB DEFAULT CHARSET=utf8 ;
CREATE TABLE IF NOT EXISTS dim_user ( surrogate_id bigint(21) NOT NULL, implementation_id int(11) NOT NULL, user_id int(11) NOT NULL, username varchar(50) NOT NULL, person_id int(11) NOT NULL, identifier varchar(255) DEFAULT NULL, secret_question varchar(255) DEFAULT NULL, secret_answer varchar(255) DEFAULT NULL, creator int(11) NOT NULL DEFAULT '0', date_created datetime NOT NULL, changed_by int(11) DEFAULT NULL, date_changed datetime DEFAULT NULL, retired tinyint(1) NOT NULL DEFAULT '0', retire_reason varchar(255) DEFAULT NULL, uuid char(38) NOT NULL, PRIMARY KEY (surrogate_id), KEY user_id_unique (user_id), KEY username_unique (username), KEY person_id_unique (person_id)) ENGINE=InnoDB DEFAULT CHARSET=utf8;
CREATE TABLE IF NOT EXISTS dim_patient ( surrogate_id bigint(21) NOT NULL, implementation_id int(11) NOT NULL, patient_id int(11) NOT NULL, patient_identifier varchar(50) NOT NULL DEFAULT '', enrs varchar(50) DEFAULT NULL, external_id varchar(50) DEFAULT NULL, gender varchar(50) DEFAULT '', birthdate date DEFAULT NULL, birthdate_estimated tinyint(1) NOT NULL DEFAULT '0', dead tinyint(1) NOT NULL DEFAULT '0', first_name varchar(50) DEFAULT NULL, middle_name varchar(50) DEFAULT NULL, last_name varchar(50) DEFAULT NULL, address1 text, address2 text, city_village text, state_province text, postal_code text, country text, creator int(11) NOT NULL DEFAULT '0', date_created datetime NOT NULL, changed_by int(11) DEFAULT NULL, date_changed datetime DEFAULT NULL, voided tinyint(1) NOT NULL DEFAULT '0', uuid char(38) DEFAULT NULL, PRIMARY KEY (surrogate_id), KEY patient_id_unique (patient_id), KEY uuid_unique (uuid), KEY identifier (patient_identifier)) ENGINE=InnoDB DEFAULT CHARSET=utf8;
CREATE TABLE IF NOT EXISTS dim_encounter ( surrogate_id bigint(21) NOT NULL, implementation_id int(11) NOT NULL DEFAULT '0', encounter_id int(11) NOT NULL, encounter_type int(11) NOT NULL, encounter_name varchar(50) NOT NULL DEFAULT '', description text, patient_id int(11) NOT NULL DEFAULT '0', location_id int(11) DEFAULT NULL, provider varchar(255) DEFAULT NULL, date_entered datetime NOT NULL, changed_by int(11) DEFAULT NULL, date_changed datetime DEFAULT NULL, creator int(11) DEFAULT NULL, date_start datetime DEFAULT NULL, date_end datetime DEFAULT NULL, uuid char(38) NOT NULL, PRIMARY KEY (surrogate_id), KEY encounter_id (encounter_id), KEY uuid_unique (uuid), KEY patient_id (patient_id), KEY location_id (location_id), KEY provider (provider)) ENGINE=InnoDB DEFAULT CHARSET=utf8;
CREATE TABLE IF NOT EXISTS dim_obs ( surrogate_id bigint(21) NOT NULL, implementation_id int(11) NOT NULL DEFAULT '0', encounter_id int(11) DEFAULT NULL, encounter_type int(11) DEFAULT NULL, patient_id int(11) DEFAULT NULL, identifier varchar(50) DEFAULT NULL, provider varchar(50) DEFAULT NULL, obs_id int(11) NOT NULL, concept_id int(11) NOT NULL DEFAULT '0', question varchar(255) DEFAULT '', obs_datetime datetime NOT NULL, location_id int(11) DEFAULT NULL, answer longtext, value_boolean tinyint(1) DEFAULT NULL, value_coded int(11) DEFAULT NULL, value_datetime datetime DEFAULT NULL, value_numeric double DEFAULT NULL, value_text text, creator int(11) NOT NULL DEFAULT '0', date_created datetime NOT NULL, voided tinyint(1) NOT NULL DEFAULT '0', uuid char(38) DEFAULT NULL, PRIMARY KEY (surrogate_id), KEY obs_id_unique (obs_id), KEY identifier (identifier), KEY encounter_type (encounter_type), KEY concept_id (concept_id), KEY question (question), KEY location_id (location_id)) ENGINE=InnoDB DEFAULT CHARSET=utf8;
-- Fact tables
CREATE TABLE IF NOT EXISTS fact_user ( implementation_id int(11) NOT NULL, datetime_id bigint(21) NOT NULL, full_date varchar(50) NOT NULL, year int(11) NOT NULL, month int(11) NOT NULL, date int(11) NOT NULL, day_name varchar(50) NOT NULL, month_name varchar(50) NOT NULL, users bigint(21) NOT NULL DEFAULT '0', PRIMARY KEY (implementation_id,datetime_id)) ENGINE=InnoDB DEFAULT CHARSET=utf8;
CREATE TABLE IF NOT EXISTS fact_concept ( implementation_id int(11) NOT NULL, active int(11) DEFAULT '0', real_valued int(11) DEFAULT '0', open_text int(11) DEFAULT '0', coded int(11) DEFAULT '0', unique_concepts int(11) DEFAULT '0', total int(11) DEFAULT '0', PRIMARY KEY (implementation_id)) ENGINE=InnoDB DEFAULT CHARSET=utf8;
CREATE TABLE IF NOT EXISTS fact_location ( implementation_id int(11) NOT NULL DEFAULT '0', datetime_id bigint(21) NOT NULL DEFAULT '0', full_date varchar(50) NOT NULL, year int(11) NOT NULL, month int(11) NOT NULL, date int(11) NOT NULL, day_name varchar(50) NOT NULL, month_name varchar(50) NOT NULL, total bigint(21) NOT NULL DEFAULT '0') ENGINE=InnoDB DEFAULT CHARSET=utf8;
-- Temporary tables
CREATE TABLE IF NOT EXISTS tmp_person ( surrogate_id int(11) NOT NULL AUTO_INCREMENT, implementation_id int(11) NOT NULL, person_id int(11) NOT NULL, gender varchar(50) DEFAULT '', birthdate date DEFAULT NULL, birthdate_estimated tinyint(1) NOT NULL DEFAULT '0', dead tinyint(1) NOT NULL DEFAULT '0', death_date datetime DEFAULT NULL, cause_of_death int(11) DEFAULT NULL, creator int(11) DEFAULT NULL, date_created datetime NOT NULL, changed_by int(11) DEFAULT NULL, date_changed datetime DEFAULT NULL, voided tinyint(1) NOT NULL DEFAULT '0', voided_by int(11) DEFAULT NULL, date_voided datetime DEFAULT NULL, void_reason varchar(255) DEFAULT NULL, uuid char(38) NOT NULL, deathdate_estimated tinyint(1) NOT NULL DEFAULT '0', birthtime time DEFAULT NULL, PRIMARY KEY (surrogate_id), KEY person_uuid_index (uuid), KEY person_birthdate (birthdate), KEY person_death_date (death_date), KEY person_died_because (cause_of_death), KEY user_who_changed_person (changed_by), KEY user_who_created_person (creator), KEY user_who_voided_person (voided_by)) ENGINE=InnoDB DEFAULT CHARSET=utf8;
CREATE TABLE IF NOT EXISTS tmp_person_attribute ( surrogate_id int(11) NOT NULL AUTO_INCREMENT, implementation_id int(11) NOT NULL, person_attribute_id int(11) NOT NULL, person_id int(11) NOT NULL DEFAULT '0', value varchar(50) NOT NULL DEFAULT '', person_attribute_type_id int(11) NOT NULL DEFAULT '0', creator int(11) NOT NULL DEFAULT '0', date_created datetime NOT NULL, changed_by int(11) DEFAULT NULL, date_changed datetime DEFAULT NULL, voided tinyint(1) NOT NULL DEFAULT '0', voided_by int(11) DEFAULT NULL, date_voided datetime DEFAULT NULL, void_reason varchar(255) DEFAULT NULL, uuid char(38) NOT NULL, PRIMARY KEY (surrogate_id), KEY person_attribute_uuid_index (uuid), KEY attribute_changer (changed_by), KEY attribute_creator (creator), KEY defines_attribute_type (person_attribute_type_id), KEY identifies_person (person_id), KEY attribute_voider (voided_by)) ENGINE=InnoDB DEFAULT CHARSET=utf8;
CREATE TABLE IF NOT EXISTS tmp_person_attribute_type ( surrogate_id int(11) NOT NULL AUTO_INCREMENT, implementation_id int(11) NOT NULL, person_attribute_type_id int(11) NOT NULL, name varchar(50) NOT NULL DEFAULT '', description text, format varchar(50) DEFAULT NULL, foreign_key int(11) DEFAULT NULL, searchable tinyint(1) NOT NULL DEFAULT '0', creator int(11) NOT NULL DEFAULT '0', date_created datetime NOT NULL, changed_by int(11) DEFAULT NULL, date_changed datetime DEFAULT NULL, retired tinyint(1) NOT NULL DEFAULT '0', retired_by int(11) DEFAULT NULL, date_retired datetime DEFAULT NULL, retire_reason varchar(255) DEFAULT NULL, edit_privilege varchar(255) DEFAULT NULL, sort_weight double DEFAULT NULL, uuid char(38) NOT NULL, PRIMARY KEY (surrogate_id), KEY person_attribute_type_uuid_index (uuid), KEY attribute_is_searchable (searchable), KEY name_of_attribute (name), KEY person_attribute_type_retired_status (retired), KEY attribute_type_changer (changed_by), KEY attribute_type_creator (creator), KEY user_who_retired_person_attribute_type (retired_by), KEY privilege_which_can_edit (edit_privilege)) ENGINE=InnoDB DEFAULT CHARSET=utf8;
CREATE TABLE IF NOT EXISTS tmp_person_address ( surrogate_id int(11) NOT NULL AUTO_INCREMENT, implementation_id int(11) NOT NULL, person_address_id int(11) NOT NULL, person_id int(11) DEFAULT NULL, preferred tinyint(1) NOT NULL DEFAULT '0', address1 varchar(255) DEFAULT NULL, address2 varchar(255) DEFAULT NULL, city_village varchar(255) DEFAULT NULL, state_province varchar(255) DEFAULT NULL, postal_code varchar(50) DEFAULT NULL, country varchar(50) DEFAULT NULL, latitude varchar(50) DEFAULT NULL, longitude varchar(50) DEFAULT NULL, start_date datetime DEFAULT NULL, end_date datetime DEFAULT NULL, creator int(11) NOT NULL DEFAULT '0', date_created datetime NOT NULL, voided tinyint(1) NOT NULL DEFAULT '0', voided_by int(11) DEFAULT NULL, date_voided datetime DEFAULT NULL, void_reason varchar(255) DEFAULT NULL, county_district varchar(255) DEFAULT NULL, address3 varchar(255) DEFAULT NULL, address4 varchar(255) DEFAULT NULL, address5 varchar(255) DEFAULT NULL, address6 varchar(255) DEFAULT NULL, date_changed datetime DEFAULT NULL, changed_by int(11) DEFAULT NULL, uuid char(38) NOT NULL, PRIMARY KEY (surrogate_id), KEY person_address_uuid_index (uuid), KEY patient_address_creator (creator), KEY address_for_person (person_id), KEY patient_address_void (voided_by), KEY person_address_changed_by (changed_by)) ENGINE=InnoDB DEFAULT CHARSET=utf8;
CREATE TABLE IF NOT EXISTS tmp_person_name ( surrogate_id int(11) NOT NULL AUTO_INCREMENT, implementation_id int(11) NOT NULL, person_name_id int(11) NOT NULL, preferred tinyint(1) NOT NULL DEFAULT '0', person_id int(11) NOT NULL, prefix varchar(50) DEFAULT NULL, given_name varchar(50) DEFAULT NULL, middle_name varchar(50) DEFAULT NULL, family_name_prefix varchar(50) DEFAULT NULL, family_name varchar(50) DEFAULT NULL, family_name2 varchar(50) DEFAULT NULL, family_name_suffix varchar(50) DEFAULT NULL, degree varchar(50) DEFAULT NULL, creator int(11) NOT NULL DEFAULT '0', date_created datetime NOT NULL, voided tinyint(1) NOT NULL DEFAULT '0', voided_by int(11) DEFAULT NULL, date_voided datetime DEFAULT NULL, void_reason varchar(255) DEFAULT NULL, changed_by int(11) DEFAULT NULL, date_changed datetime DEFAULT NULL, uuid char(38) NOT NULL, PRIMARY KEY (surrogate_id), KEY person_name_uuid_index (uuid), KEY first_name (given_name), KEY last_name (family_name), KEY middle_name (middle_name), KEY family_name2 (family_name2), KEY user_who_made_name (creator), KEY name_for_person (person_id), KEY user_who_voided_name (voided_by)) ENGINE=InnoDB DEFAULT CHARSET=utf8;
CREATE TABLE IF NOT EXISTS tmp_role ( surrogate_id int(11) NOT NULL AUTO_INCREMENT, implementation_id int(11) NOT NULL, role varchar(50) NOT NULL DEFAULT '', description varchar(255) DEFAULT NULL, uuid char(38) NOT NULL, PRIMARY KEY (surrogate_id), KEY role_uuid_index (uuid)) ENGINE=InnoDB DEFAULT CHARSET=utf8;
CREATE TABLE IF NOT EXISTS tmp_role_role ( surrogate_id int(11) NOT NULL AUTO_INCREMENT, implementation_id int(11) NOT NULL, parent_role varchar(50) NOT NULL DEFAULT '', child_role varchar(50) NOT NULL DEFAULT '', PRIMARY KEY (surrogate_id), KEY inherited_role (child_role)) ENGINE=InnoDB DEFAULT CHARSET=utf8;
CREATE TABLE IF NOT EXISTS tmp_privilege ( surrogate_id int(11) NOT NULL AUTO_INCREMENT, implementation_id int(11) NOT NULL, privilege varchar(255) NOT NULL, description text, uuid char(38) NOT NULL, PRIMARY KEY (surrogate_id), KEY privilege_uuid_index (uuid)) ENGINE=InnoDB DEFAULT CHARSET=utf8;
CREATE TABLE IF NOT EXISTS tmp_role_privilege ( surrogate_id int(11) NOT NULL AUTO_INCREMENT, implementation_id int(11) NOT NULL, role varchar(50) NOT NULL DEFAULT '', privilege varchar(255) NOT NULL, PRIMARY KEY (surrogate_id), KEY role_privilege_to_role (role)) ENGINE=InnoDB DEFAULT CHARSET=utf8;
CREATE TABLE IF NOT EXISTS tmp_users ( surrogate_id int(11) NOT NULL AUTO_INCREMENT, implementation_id int(11) NOT NULL, user_id int(11) NOT NULL, system_id varchar(50) NOT NULL DEFAULT '', username varchar(50) DEFAULT NULL, password varchar(128) DEFAULT NULL, salt varchar(128) DEFAULT NULL, secret_question varchar(255) DEFAULT NULL, secret_answer varchar(255) DEFAULT NULL, creator int(11) NOT NULL DEFAULT '0', date_created datetime NOT NULL, changed_by int(11) DEFAULT NULL, date_changed datetime DEFAULT NULL, person_id int(11) NOT NULL, retired tinyint(1) NOT NULL DEFAULT '0', retired_by int(11) DEFAULT NULL, date_retired datetime DEFAULT NULL, retire_reason varchar(255) DEFAULT NULL, uuid char(38) NOT NULL, PRIMARY KEY (surrogate_id), KEY user_who_changed_user (changed_by), KEY user_creator (creator), KEY user_who_retired_this_user (retired_by), KEY person_id_for_user (person_id)) ENGINE=InnoDB DEFAULT CHARSET=utf8;
CREATE TABLE IF NOT EXISTS tmp_user_property ( surrogate_id int(11) NOT NULL AUTO_INCREMENT, implementation_id int(11) NOT NULL, user_id int(11) NOT NULL DEFAULT '0', property varchar(100) NOT NULL DEFAULT '', property_value varchar(255) NOT NULL DEFAULT '', PRIMARY KEY (surrogate_id)) ENGINE=InnoDB DEFAULT CHARSET=utf8;
CREATE TABLE IF NOT EXISTS tmp_user_role ( surrogate_id int(11) NOT NULL AUTO_INCREMENT, implementation_id int(11) NOT NULL, user_id int(11) NOT NULL DEFAULT '0', role varchar(50) NOT NULL DEFAULT '', PRIMARY KEY (surrogate_id), KEY user_role_to_users (user_id)) ENGINE=InnoDB DEFAULT CHARSET=utf8;
CREATE TABLE IF NOT EXISTS tmp_provider_attribute_type ( surrogate_id int(11) NOT NULL AUTO_INCREMENT, implementation_id int(11) NOT NULL, provider_attribute_type_id int(11) NOT NULL, name varchar(255) NOT NULL, description varchar(1024) DEFAULT NULL, datatype varchar(255) DEFAULT NULL, datatype_config text, preferred_handler varchar(255) DEFAULT NULL, handler_config text, min_occurs int(11) NOT NULL, max_occurs int(11) DEFAULT NULL, creator int(11) NOT NULL, date_created datetime NOT NULL, changed_by int(11) DEFAULT NULL, date_changed datetime DEFAULT NULL, retired tinyint(1) NOT NULL DEFAULT '0', retired_by int(11) DEFAULT NULL, date_retired datetime DEFAULT NULL, retire_reason varchar(255) DEFAULT NULL, uuid char(38) NOT NULL, PRIMARY KEY (surrogate_id), KEY uuid (uuid), KEY provider_attribute_type_creator_fk (creator), KEY provider_attribute_type_changed_by_fk (changed_by), KEY provider_attribute_type_retired_by_fk (retired_by)) ENGINE=InnoDB DEFAULT CHARSET=utf8;
CREATE TABLE IF NOT EXISTS tmp_provider ( surrogate_id int(11) NOT NULL AUTO_INCREMENT, implementation_id int(11) NOT NULL, provider_id int(11) NOT NULL, person_id int(11) DEFAULT NULL, name varchar(255) DEFAULT NULL, identifier varchar(255) DEFAULT NULL, creator int(11) NOT NULL, date_created datetime NOT NULL, changed_by int(11) DEFAULT NULL, date_changed datetime DEFAULT NULL, retired tinyint(1) NOT NULL DEFAULT '0', retired_by int(11) DEFAULT NULL, date_retired datetime DEFAULT NULL, retire_reason varchar(255) DEFAULT NULL, uuid char(38) NOT NULL, PRIMARY KEY (surrogate_id), KEY uuid (uuid), KEY provider_changed_by_fk (changed_by), KEY provider_person_id_fk (person_id), KEY provider_retired_by_fk (retired_by), KEY provider_creator_fk (creator)) ENGINE=InnoDB DEFAULT CHARSET=utf8;
CREATE TABLE IF NOT EXISTS tmp_provider_attribute ( surrogate_id int(11) NOT NULL AUTO_INCREMENT, implementation_id int(11) NOT NULL, provider_attribute_id int(11) NOT NULL, provider_id int(11) NOT NULL, attribute_type_id int(11) NOT NULL, value_reference text NOT NULL, uuid char(38) NOT NULL, creator int(11) NOT NULL, date_created datetime NOT NULL, changed_by int(11) DEFAULT NULL, date_changed datetime DEFAULT NULL, voided tinyint(1) NOT NULL DEFAULT '0', voided_by int(11) DEFAULT NULL, date_voided datetime DEFAULT NULL, void_reason varchar(255) DEFAULT NULL, PRIMARY KEY (surrogate_id), KEY uuid (uuid), KEY provider_attribute_provider_fk (provider_id), KEY provider_attribute_attribute_type_id_fk (attribute_type_id), KEY provider_attribute_creator_fk (creator), KEY provider_attribute_changed_by_fk (changed_by), KEY provider_attribute_voided_by_fk (voided_by)) ENGINE=InnoDB DEFAULT CHARSET=utf8;
CREATE TABLE IF NOT EXISTS tmp_location_attribute_type ( surrogate_id int(11) NOT NULL AUTO_INCREMENT, implementation_id int(11) NOT NULL, location_attribute_type_id int(11) NOT NULL, name varchar(255) NOT NULL, description varchar(1024) DEFAULT NULL, datatype varchar(255) DEFAULT NULL, datatype_config text, preferred_handler varchar(255) DEFAULT NULL, handler_config text, min_occurs int(11) NOT NULL, max_occurs int(11) DEFAULT NULL, creator int(11) NOT NULL, date_created datetime NOT NULL, changed_by int(11) DEFAULT NULL, date_changed datetime DEFAULT NULL, retired tinyint(1) NOT NULL DEFAULT '0', retired_by int(11) DEFAULT NULL, date_retired datetime DEFAULT NULL, retire_reason varchar(255) DEFAULT NULL, uuid char(38) NOT NULL, PRIMARY KEY (surrogate_id), KEY uuid (uuid), KEY location_attribute_type_unique_name (name), KEY location_attribute_type_creator_fk (creator), KEY location_attribute_type_changed_by_fk (changed_by), KEY location_attribute_type_retired_by_fk (retired_by)) ENGINE=InnoDB DEFAULT CHARSET=utf8;
CREATE TABLE IF NOT EXISTS tmp_location ( surrogate_id int(11) NOT NULL AUTO_INCREMENT, implementation_id int(11) NOT NULL, location_id int(11) NOT NULL, name varchar(255) NOT NULL DEFAULT '', description varchar(255) DEFAULT NULL, address1 varchar(255) DEFAULT NULL, address2 varchar(255) DEFAULT NULL, city_village varchar(255) DEFAULT NULL, state_province varchar(255) DEFAULT NULL, postal_code varchar(50) DEFAULT NULL, country varchar(50) DEFAULT NULL, latitude varchar(50) DEFAULT NULL, longitude varchar(50) DEFAULT NULL, creator int(11) NOT NULL DEFAULT '0', date_created datetime NOT NULL, county_district varchar(255) DEFAULT NULL, address3 varchar(255) DEFAULT NULL, address4 varchar(255) DEFAULT NULL, address5 varchar(255) DEFAULT NULL, address6 varchar(255) DEFAULT NULL, retired tinyint(1) NOT NULL DEFAULT '0', retired_by int(11) DEFAULT NULL, date_retired datetime DEFAULT NULL, retire_reason varchar(255) DEFAULT NULL, parent_location int(11) DEFAULT NULL, uuid char(38) NOT NULL, changed_by int(11) DEFAULT NULL, date_changed datetime DEFAULT NULL, PRIMARY KEY (surrogate_id), KEY location_uuid_index (uuid), KEY name_of_location (name), KEY location_retired_status (retired), KEY user_who_created_location (creator), KEY user_who_retired_location (retired_by), KEY parent_location (parent_location), KEY location_changed_by (changed_by)) ENGINE=InnoDB DEFAULT CHARSET=utf8;
CREATE TABLE IF NOT EXISTS tmp_location_attribute ( surrogate_id int(11) NOT NULL AUTO_INCREMENT, implementation_id int(11) NOT NULL, location_attribute_id int(11) NOT NULL, location_id int(11) NOT NULL, attribute_type_id int(11) NOT NULL, value_reference text NOT NULL, uuid char(38) NOT NULL, creator int(11) NOT NULL, date_created datetime NOT NULL, changed_by int(11) DEFAULT NULL, date_changed datetime DEFAULT NULL, voided tinyint(1) NOT NULL DEFAULT '0', voided_by int(11) DEFAULT NULL, date_voided datetime DEFAULT NULL, void_reason varchar(255) DEFAULT NULL, PRIMARY KEY (surrogate_id), KEY uuid (uuid), KEY location_attribute_location_fk (location_id), KEY location_attribute_attribute_type_id_fk (attribute_type_id), KEY location_attribute_creator_fk (creator), KEY location_attribute_changed_by_fk (changed_by), KEY location_attribute_voided_by_fk (voided_by)) ENGINE=InnoDB DEFAULT CHARSET=utf8;
CREATE TABLE IF NOT EXISTS tmp_location_tag ( surrogate_id int(11) NOT NULL AUTO_INCREMENT, implementation_id int(11) NOT NULL, location_tag_id int(11) NOT NULL, name varchar(50) NOT NULL, description varchar(255) DEFAULT NULL, creator int(11) NOT NULL, date_created datetime NOT NULL, retired tinyint(1) NOT NULL DEFAULT '0', retired_by int(11) DEFAULT NULL, date_retired datetime DEFAULT NULL, retire_reason varchar(255) DEFAULT NULL, uuid char(38) NOT NULL, changed_by int(11) DEFAULT NULL, date_changed datetime DEFAULT NULL, PRIMARY KEY (surrogate_id), KEY location_tag_uuid_index (uuid), KEY location_tag_creator (creator), KEY location_tag_retired_by (retired_by), KEY location_tag_changed_by (changed_by)) ENGINE=InnoDB DEFAULT CHARSET=utf8;
CREATE TABLE IF NOT EXISTS tmp_location_tag_map ( surrogate_id int(11) NOT NULL AUTO_INCREMENT, implementation_id int(11) NOT NULL, location_id int(11) NOT NULL, location_tag_id int(11) NOT NULL, PRIMARY KEY (surrogate_id), KEY location_tag_map_tag (location_tag_id)) ENGINE=InnoDB DEFAULT CHARSET=utf8;
CREATE TABLE IF NOT EXISTS tmp_concept_class ( surrogate_id int(11) NOT NULL AUTO_INCREMENT, implementation_id int(11) NOT NULL, concept_class_id int(11) NOT NULL, name varchar(255) NOT NULL DEFAULT '', description varchar(255) DEFAULT NULL, creator int(11) NOT NULL DEFAULT '0', date_created datetime NOT NULL DEFAULT '0000-00-00 00:00:00', retired tinyint(1) NOT NULL DEFAULT '0', retired_by int(11) DEFAULT NULL, date_retired datetime DEFAULT NULL, retire_reason varchar(255) DEFAULT NULL, uuid char(38) NOT NULL, PRIMARY KEY (surrogate_id), KEY concept_class_uuid_index (uuid), KEY concept_class_creator (creator), KEY user_who_retired_concept_class (retired_by), KEY concept_class_retired_status (retired)) ENGINE=InnoDB DEFAULT CHARSET=utf8;
CREATE TABLE IF NOT EXISTS tmp_concept_set ( surrogate_id int(11) NOT NULL AUTO_INCREMENT, implementation_id int(11) NOT NULL, concept_set_id int(11) NOT NULL, concept_id int(11) NOT NULL DEFAULT '0', concept_set int(11) NOT NULL DEFAULT '0', sort_weight double DEFAULT NULL, creator int(11) NOT NULL DEFAULT '0', date_created datetime NOT NULL DEFAULT '0000-00-00 00:00:00', uuid char(38) NOT NULL, PRIMARY KEY (surrogate_id), KEY concept_set_uuid_index (uuid), KEY has_a (concept_set), KEY user_who_created (creator), KEY idx_concept_set_concept (concept_id)) ENGINE=InnoDB DEFAULT CHARSET=utf8;
CREATE TABLE IF NOT EXISTS tmp_concept_datatype ( surrogate_id int(11) NOT NULL AUTO_INCREMENT, implementation_id int(11) NOT NULL, concept_datatype_id int(11) NOT NULL, name varchar(255) NOT NULL DEFAULT '', hl7_abbreviation varchar(3) DEFAULT NULL, description varchar(255) DEFAULT NULL, creator int(11) NOT NULL DEFAULT '0', date_created datetime NOT NULL DEFAULT '0000-00-00 00:00:00', retired tinyint(1) NOT NULL DEFAULT '0', retired_by int(11) DEFAULT NULL, date_retired datetime DEFAULT NULL, retire_reason varchar(255) DEFAULT NULL, uuid char(38) NOT NULL, PRIMARY KEY (surrogate_id), KEY concept_datatype_uuid_index (uuid), KEY concept_datatype_creator (creator), KEY user_who_retired_concept_datatype (retired_by), KEY concept_datatype_retired_status (retired)) ENGINE=InnoDB DEFAULT CHARSET=utf8;
CREATE TABLE IF NOT EXISTS tmp_concept_map_type ( surrogate_id int(11) NOT NULL AUTO_INCREMENT, implementation_id int(11) NOT NULL, concept_map_type_id int(11) NOT NULL, name varchar(255) CHARACTER SET utf8 NOT NULL, description varchar(255) CHARACTER SET utf8 DEFAULT NULL, creator int(11) NOT NULL, date_created datetime NOT NULL, changed_by int(11) DEFAULT NULL, date_changed datetime DEFAULT NULL, is_hidden tinyint(1) DEFAULT NULL, retired tinyint(1) NOT NULL DEFAULT '0', retired_by int(11) DEFAULT NULL, date_retired datetime DEFAULT NULL, retire_reason varchar(255) CHARACTER SET utf8 DEFAULT NULL, uuid char(38) CHARACTER SET utf8 NOT NULL, PRIMARY KEY (surrogate_id), KEY name (name), KEY uuid (uuid), KEY mapped_user_creator_concept_map_type (creator), KEY mapped_user_changed_concept_map_type (changed_by), KEY mapped_user_retired_concept_map_type (retired_by)) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_bin;
CREATE TABLE IF NOT EXISTS tmp_concept ( surrogate_id int(11) NOT NULL AUTO_INCREMENT, implementation_id int(11) NOT NULL, concept_id int(11) NOT NULL, retired tinyint(1) NOT NULL DEFAULT '0', short_name varchar(255) DEFAULT NULL, description text, form_text text, datatype_id int(11) NOT NULL DEFAULT '0', class_id int(11) NOT NULL DEFAULT '0', is_set tinyint(1) NOT NULL DEFAULT '0', creator int(11) NOT NULL DEFAULT '0', date_created datetime NOT NULL DEFAULT '0000-00-00 00:00:00', version varchar(50) DEFAULT NULL, changed_by int(11) DEFAULT NULL, date_changed datetime DEFAULT NULL, retired_by int(11) DEFAULT NULL, date_retired datetime DEFAULT NULL, retire_reason varchar(255) DEFAULT NULL, uuid char(38) NOT NULL, PRIMARY KEY (surrogate_id), KEY concept_uuid_index (uuid), KEY concept_classes (class_id), KEY concept_creator (creator), KEY concept_datatypes (datatype_id), KEY user_who_changed_concept (changed_by), KEY concept_code (version), KEY concept_ndx (version), KEY user_who_retired_concept (retired_by)) ENGINE=InnoDB DEFAULT CHARSET=utf8;
CREATE TABLE IF NOT EXISTS tmp_concept_name ( surrogate_id int(11) NOT NULL AUTO_INCREMENT, implementation_id int(11) NOT NULL, concept_id int(11) DEFAULT NULL, name varchar(255) NOT NULL DEFAULT '', locale varchar(50) NOT NULL DEFAULT '', creator int(11) NOT NULL DEFAULT '0', date_created datetime NOT NULL DEFAULT '0000-00-00 00:00:00', concept_name_id int(11) NOT NULL, voided tinyint(1) NOT NULL DEFAULT '0', voided_by int(11) DEFAULT NULL, date_voided datetime DEFAULT NULL, void_reason varchar(255) DEFAULT NULL, uuid char(38) NOT NULL, concept_name_type varchar(50) DEFAULT NULL, locale_preferred tinyint(1) DEFAULT '0', PRIMARY KEY (surrogate_id), KEY concept_name_id (concept_name_id), KEY concept_name_uuid_index (uuid), KEY user_who_created_name (creator), KEY name_of_concept (name), KEY concept_id (concept_id), KEY unique_concept_name_id (concept_id), KEY user_who_voided_name (voided_by)) ENGINE=InnoDB DEFAULT CHARSET=utf8;
CREATE TABLE IF NOT EXISTS tmp_concept_description ( surrogate_id int(11) NOT NULL AUTO_INCREMENT, implementation_id int(11) NOT NULL, concept_description_id int(11) NOT NULL, concept_id int(11) NOT NULL DEFAULT '0', description text NOT NULL, locale varchar(50) NOT NULL DEFAULT '', creator int(11) NOT NULL DEFAULT '0', date_created datetime NOT NULL DEFAULT '0000-00-00 00:00:00', changed_by int(11) DEFAULT NULL, date_changed datetime DEFAULT NULL, uuid char(38) NOT NULL, PRIMARY KEY (surrogate_id), KEY concept_description_uuid_index (uuid), KEY concept_being_described (concept_id), KEY user_who_created_description (creator), KEY user_who_changed_description (changed_by)) ENGINE=InnoDB DEFAULT CHARSET=utf8;
CREATE TABLE IF NOT EXISTS tmp_concept_answer ( surrogate_id int(11) NOT NULL AUTO_INCREMENT, implementation_id int(11) NOT NULL, concept_answer_id int(11) NOT NULL, concept_id int(11) NOT NULL DEFAULT '0', answer_concept int(11) DEFAULT NULL, answer_drug int(11) DEFAULT NULL, creator int(11) NOT NULL DEFAULT '0', date_created datetime NOT NULL DEFAULT '0000-00-00 00:00:00', uuid char(38) NOT NULL, sort_weight double DEFAULT NULL, PRIMARY KEY (surrogate_id), KEY concept_answer_uuid_index (uuid), KEY answer_creator (creator), KEY answer (answer_concept), KEY answers_for_concept (concept_id), KEY answer_answer_drug_fk (answer_drug)) ENGINE=InnoDB DEFAULT CHARSET=utf8;
CREATE TABLE IF NOT EXISTS tmp_concept_numeric ( surrogate_id int(11) NOT NULL AUTO_INCREMENT, implementation_id int(11) NOT NULL, concept_id int(11) NOT NULL DEFAULT '0', hi_absolute double DEFAULT NULL, hi_critical double DEFAULT NULL, hi_normal double DEFAULT NULL, low_absolute double DEFAULT NULL, low_critical double DEFAULT NULL, low_normal double DEFAULT NULL, units varchar(50) DEFAULT NULL, precise tinyint(1) NOT NULL DEFAULT '0', display_precision int(11) DEFAULT NULL, PRIMARY KEY (surrogate_id), KEY concept_id_index (concept_id)) ENGINE=InnoDB DEFAULT CHARSET=utf8;
CREATE TABLE IF NOT EXISTS tmp_patient_identifier_type ( surrogate_id int(11) NOT NULL AUTO_INCREMENT, implementation_id int(11) NOT NULL, patient_identifier_type_id int(11) NOT NULL, name varchar(50) NOT NULL DEFAULT '', description text, format varchar(255) DEFAULT NULL, check_digit tinyint(1) NOT NULL DEFAULT '0', creator int(11) NOT NULL DEFAULT '0', date_created datetime NOT NULL, required tinyint(1) NOT NULL DEFAULT '0', format_description varchar(255) DEFAULT NULL, validator varchar(200) DEFAULT NULL, location_behavior varchar(50) DEFAULT NULL, retired tinyint(1) NOT NULL DEFAULT '0', retired_by int(11) DEFAULT NULL, date_retired datetime DEFAULT NULL, retire_reason varchar(255) DEFAULT NULL, uuid char(38) NOT NULL, uniqueness_behavior varchar(50) DEFAULT NULL, PRIMARY KEY (surrogate_id), KEY patient_identifier_type_uuid_index (uuid), KEY patient_identifier_type_retired_status (retired), KEY type_creator (creator), KEY user_who_retired_patient_identifier_type (retired_by)) ENGINE=InnoDB DEFAULT CHARSET=utf8;
CREATE TABLE IF NOT EXISTS tmp_patient ( surrogate_id int(11) NOT NULL AUTO_INCREMENT, implementation_id int(11) NOT NULL, patient_id int(11) NOT NULL, creator int(11) NOT NULL DEFAULT '0', date_created datetime NOT NULL, changed_by int(11) DEFAULT NULL, date_changed datetime DEFAULT NULL, voided tinyint(1) NOT NULL DEFAULT '0', voided_by int(11) DEFAULT NULL, date_voided datetime DEFAULT NULL, void_reason varchar(255) DEFAULT NULL, PRIMARY KEY (surrogate_id), KEY user_who_changed_pat (changed_by), KEY user_who_created_patient (creator), KEY user_who_voided_patient (voided_by)) ENGINE=InnoDB DEFAULT CHARSET=utf8;
CREATE TABLE IF NOT EXISTS tmp_patient_identifier ( surrogate_id int(11) NOT NULL AUTO_INCREMENT, implementation_id int(11) NOT NULL, patient_identifier_id int(11) NOT NULL, patient_id int(11) NOT NULL DEFAULT '0', identifier varchar(50) NOT NULL DEFAULT '', identifier_type int(11) NOT NULL DEFAULT '0', preferred tinyint(1) NOT NULL DEFAULT '0', location_id int(11) DEFAULT '0', creator int(11) NOT NULL DEFAULT '0', date_created datetime NOT NULL, date_changed datetime DEFAULT NULL, changed_by int(11) DEFAULT NULL, voided tinyint(1) NOT NULL DEFAULT '0', voided_by int(11) DEFAULT NULL, date_voided datetime DEFAULT NULL, void_reason varchar(255) DEFAULT NULL, uuid char(38) NOT NULL, PRIMARY KEY (surrogate_id), KEY patient_identifier_uuid_index (uuid), KEY identifier_name (identifier), KEY idx_patient_identifier_patient (patient_id), KEY identifier_creator (creator), KEY defines_identifier_type (identifier_type), KEY patient_identifier_ibfk_2 (location_id), KEY identifier_voider (voided_by), KEY patient_identifier_changed_by (changed_by)) ENGINE=InnoDB DEFAULT CHARSET=utf8;
CREATE TABLE IF NOT EXISTS tmp_patient_program ( surrogate_id int(11) NOT NULL AUTO_INCREMENT, implementation_id int(11) NOT NULL, patient_program_id int(11) NOT NULL, patient_id int(11) NOT NULL DEFAULT '0', program_id int(11) NOT NULL DEFAULT '0', date_enrolled datetime DEFAULT NULL, date_completed datetime DEFAULT NULL, location_id int(11) DEFAULT NULL, outcome_concept_id int(11) DEFAULT NULL, creator int(11) NOT NULL DEFAULT '0', date_created datetime NOT NULL, changed_by int(11) DEFAULT NULL, date_changed datetime DEFAULT NULL, voided tinyint(1) NOT NULL DEFAULT '0', voided_by int(11) DEFAULT NULL, date_voided datetime DEFAULT NULL, void_reason varchar(255) DEFAULT NULL, uuid char(38) NOT NULL, PRIMARY KEY (surrogate_id), KEY patient_program_uuid_index (uuid), KEY user_who_changed (changed_by), KEY patient_program_creator (creator), KEY patient_in_program (patient_id), KEY program_for_patient (program_id), KEY user_who_voided_patient_program (voided_by), KEY patient_program_location_id (location_id), KEY patient_program_outcome_concept_id_fk (outcome_concept_id)) ENGINE=InnoDB DEFAULT CHARSET=utf8;
CREATE TABLE IF NOT EXISTS tmp_encounter_type ( surrogate_id int(11) NOT NULL AUTO_INCREMENT, implementation_id int(11) NOT NULL, encounter_type_id int(11) NOT NULL, name varchar(50) NOT NULL DEFAULT '', description text, creator int(11) NOT NULL DEFAULT '0', date_created datetime NOT NULL, retired tinyint(1) NOT NULL DEFAULT '0', retired_by int(11) DEFAULT NULL, date_retired datetime DEFAULT NULL, retire_reason varchar(255) DEFAULT NULL, uuid char(38) NOT NULL, edit_privilege varchar(255) DEFAULT NULL, view_privilege varchar(255) DEFAULT NULL, PRIMARY KEY (surrogate_id), KEY encounter_type_unique_name (name), KEY encounter_type_uuid_index (uuid), KEY encounter_type_retired_status (retired), KEY user_who_created_type (creator), KEY user_who_retired_encounter_type (retired_by), KEY privilege_which_can_view_encounter_type (view_privilege), KEY privilege_which_can_edit_encounter_type (edit_privilege)) ENGINE=InnoDB DEFAULT CHARSET=utf8;
CREATE TABLE IF NOT EXISTS tmp_form ( surrogate_id int(11) NOT NULL AUTO_INCREMENT, implementation_id int(11) NOT NULL, form_id int(11) NOT NULL, name varchar(255) NOT NULL DEFAULT '', version varchar(50) NOT NULL DEFAULT '', build int(11) DEFAULT NULL, published tinyint(1) NOT NULL DEFAULT '0', xslt text, template text, description text, encounter_type int(11) DEFAULT NULL, creator int(11) NOT NULL DEFAULT '0', date_created datetime NOT NULL, changed_by int(11) DEFAULT NULL, date_changed datetime DEFAULT NULL, retired tinyint(1) NOT NULL DEFAULT '0', retired_by int(11) DEFAULT NULL, date_retired datetime DEFAULT NULL, retired_reason varchar(255) DEFAULT NULL, uuid char(38) NOT NULL, PRIMARY KEY (surrogate_id), KEY form_uuid_index (uuid), KEY form_published_index (published), KEY form_retired_index (retired), KEY form_published_and_retired_index (published,retired), KEY user_who_last_changed_form (changed_by), KEY user_who_created_form (creator), KEY form_encounter_type (encounter_type), KEY user_who_retired_form (retired_by)) ENGINE=InnoDB DEFAULT CHARSET=utf8;
CREATE TABLE IF NOT EXISTS tmp_encounter_role ( surrogate_id int(11) NOT NULL AUTO_INCREMENT, implementation_id int(11) NOT NULL, encounter_role_id int(11) NOT NULL, name varchar(255) NOT NULL, description varchar(1024) DEFAULT NULL, creator int(11) NOT NULL, date_created datetime NOT NULL, changed_by int(11) DEFAULT NULL, date_changed datetime DEFAULT NULL, retired tinyint(1) NOT NULL DEFAULT '0', retired_by int(11) DEFAULT NULL, date_retired datetime DEFAULT NULL, retire_reason varchar(255) DEFAULT NULL, uuid char(38) NOT NULL, PRIMARY KEY (surrogate_id), KEY uuid (uuid), KEY encounter_role_unique_name (name), KEY encounter_role_creator_fk (creator), KEY encounter_role_changed_by_fk (changed_by), KEY encounter_role_retired_by_fk (retired_by)) ENGINE=InnoDB DEFAULT CHARSET=utf8;
CREATE TABLE IF NOT EXISTS tmp_encounter ( surrogate_id int(11) NOT NULL AUTO_INCREMENT, implementation_id int(11) NOT NULL, encounter_id int(11) NOT NULL, encounter_type int(11) NOT NULL, patient_id int(11) NOT NULL DEFAULT '0', location_id int(11) DEFAULT NULL, form_id int(11) DEFAULT NULL, encounter_datetime datetime NOT NULL, creator int(11) NOT NULL DEFAULT '0', date_created datetime NOT NULL, voided tinyint(1) NOT NULL DEFAULT '0', voided_by int(11) DEFAULT NULL, date_voided datetime DEFAULT NULL, void_reason varchar(255) DEFAULT NULL, changed_by int(11) DEFAULT NULL, date_changed datetime DEFAULT NULL, visit_id int(11) DEFAULT NULL, uuid char(38) NOT NULL, PRIMARY KEY (surrogate_id), KEY encounter_uuid_index (uuid), KEY encounter_datetime_idx (encounter_datetime), KEY encounter_ibfk_1 (creator), KEY encounter_type_id (encounter_type), KEY encounter_form (form_id), KEY encounter_location (location_id), KEY encounter_patient (patient_id), KEY user_who_voided_encounter (voided_by), KEY encounter_changed_by (changed_by), KEY encounter_visit_id_fk (visit_id)) ENGINE=InnoDB DEFAULT CHARSET=utf8;
CREATE TABLE IF NOT EXISTS tmp_encounter_provider ( surrogate_id int(11) NOT NULL AUTO_INCREMENT, implementation_id int(11) NOT NULL, encounter_provider_id int(11) NOT NULL, encounter_id int(11) NOT NULL, provider_id int(11) NOT NULL, encounter_role_id int(11) NOT NULL, creator int(11) NOT NULL DEFAULT '0', date_created datetime NOT NULL, changed_by int(11) DEFAULT NULL, date_changed datetime DEFAULT NULL, voided tinyint(1) NOT NULL DEFAULT '0', date_voided datetime DEFAULT NULL, voided_by int(11) DEFAULT NULL, void_reason varchar(255) DEFAULT NULL, uuid char(38) NOT NULL, PRIMARY KEY (surrogate_id), KEY uuid (uuid), KEY encounter_id_fk (encounter_id), KEY provider_id_fk (provider_id), KEY encounter_role_id_fk (encounter_role_id), KEY encounter_provider_creator (creator), KEY encounter_provider_changed_by (changed_by), KEY encounter_provider_voided_by (voided_by)) ENGINE=InnoDB DEFAULT CHARSET=utf8;
CREATE TABLE IF NOT EXISTS tmp_obs ( surrogate_id int(11) NOT NULL AUTO_INCREMENT, implementation_id int(11) NOT NULL, obs_id int(11) NOT NULL, person_id int(11) NOT NULL, concept_id int(11) NOT NULL DEFAULT '0', encounter_id int(11) DEFAULT NULL, order_id int(11) DEFAULT NULL, obs_datetime datetime NOT NULL, location_id int(11) DEFAULT NULL, obs_group_id int(11) DEFAULT NULL, accession_number varchar(255) DEFAULT NULL, value_group_id int(11) DEFAULT NULL, value_boolean tinyint(1) DEFAULT NULL, value_coded int(11) DEFAULT NULL, value_coded_name_id int(11) DEFAULT NULL, value_drug int(11) DEFAULT NULL, value_datetime datetime DEFAULT NULL, value_numeric double DEFAULT NULL, value_modifier varchar(2) DEFAULT NULL, value_text text, value_complex varchar(255) DEFAULT NULL, comments varchar(255) DEFAULT NULL, creator int(11) NOT NULL DEFAULT '0', date_created datetime NOT NULL, voided tinyint(1) NOT NULL DEFAULT '0', voided_by int(11) DEFAULT NULL, date_voided datetime DEFAULT NULL, void_reason varchar(255) DEFAULT NULL, uuid char(38) NOT NULL, previous_version int(11) DEFAULT NULL, form_namespace_and_path varchar(255) DEFAULT NULL, PRIMARY KEY (surrogate_id), KEY obs_uuid_index (uuid), KEY obs_datetime_idx (obs_datetime), KEY obs_concept (concept_id), KEY obs_enterer (creator), KEY encounter_observations (encounter_id), KEY obs_location (location_id), KEY obs_grouping_id (obs_group_id), KEY obs_order (order_id), KEY person_obs (person_id), KEY answer_concept (value_coded), KEY obs_name_of_coded_value (value_coded_name_id), KEY answer_concept_drug (value_drug), KEY user_who_voided_obs (voided_by), KEY previous_version (previous_version)) ENGINE=InnoDB DEFAULT CHARSET=utf8;
CREATE TABLE IF NOT EXISTS tmp_visit_type(surrogate_id int(11) NOT NULL AUTO_INCREMENT,   implementation_id int(11) NOT NULL,   visit_type_id int(11) NOT NULL DEFAULT '0' ,  name varchar(255) NOT NULL,  description varchar(1024) DEFAULT NULL,  creator int(11) NOT NULL,  date_created datetime NOT NULL,  changed_by int(11) DEFAULT NULL,  date_changed datetime DEFAULT NULL,  retired tinyint(1) NOT NULL DEFAULT '0',  retired_by int(11) DEFAULT NULL,  date_retired datetime DEFAULT NULL,  retire_reason varchar(255) DEFAULT NULL,  uuid char(38) NOT NULL,  PRIMARY KEY (surrogate_id),  KEY uuid (uuid),  KEY visit_type_creator (creator),  KEY visit_type_changed_by (changed_by),  KEY visit_type_retired_by (retired_by)) ENGINE=InnoDB  DEFAULT CHARSET=utf8;
CREATE TABLE IF NOT EXISTS tmp_visit_attribute_type (surrogate_id int(11) NOT NULL AUTO_INCREMENT,   implementation_id int(11) NOT NULL,   visit_attribute_type_id int(11) NOT NULL,  name varchar(255) NOT NULL,  description varchar(1024) DEFAULT NULL,  datatype varchar(255) DEFAULT NULL,  datatype_config text,  preferred_handler varchar(255) DEFAULT NULL,  handler_config text,  min_occurs int(11) NOT NULL,  max_occurs int(11) DEFAULT NULL,  creator int(11) NOT NULL,  date_created datetime NOT NULL,  changed_by int(11) DEFAULT NULL,  date_changed datetime DEFAULT NULL,  retired tinyint(1) NOT NULL DEFAULT '0',  retired_by int(11) DEFAULT NULL,  date_retired datetime DEFAULT NULL,  retire_reason varchar(255) DEFAULT NULL,  uuid char(38) NOT NULL,  PRIMARY KEY (surrogate_id),  KEY uuid (uuid),  KEY visit_attribute_type_creator_fk (creator),  KEY visit_attribute_type_changed_by_fk (changed_by),  KEY visit_attribute_type_retired_by_fk (retired_by)) ENGINE=InnoDB DEFAULT CHARSET=utf8; 
CREATE TABLE IF NOT EXISTS tmp_visit_attribute (surrogate_id int(11) NOT NULL AUTO_INCREMENT,   implementation_id int(11) NOT NULL,   visit_attribute_id int(11) NOT NULL,  visit_id int(11) NOT NULL,  attribute_type_id int(11) NOT NULL,  value_reference text NOT NULL,  uuid char(38) NOT NULL,  creator int(11) NOT NULL,  date_created datetime NOT NULL,  changed_by int(11) DEFAULT NULL,  date_changed datetime DEFAULT NULL,  voided tinyint(1) NOT NULL DEFAULT '0',  voided_by int(11) DEFAULT NULL,  date_voided datetime DEFAULT NULL,  void_reason varchar(255) DEFAULT NULL,  PRIMARY KEY (surrogate_id),  KEY uuid (uuid),  KEY visit_attribute_visit_fk (visit_id),  KEY visit_attribute_attribute_type_id_fk (attribute_type_id),  KEY visit_attribute_creator_fk (creator),  KEY visit_attribute_changed_by_fk (changed_by),  KEY visit_attribute_voided_by_fk (voided_by)) ENGINE=InnoDB DEFAULT CHARSET=utf8; 
CREATE TABLE IF NOT EXISTS tmp_field (surrogate_id int(11) NOT NULL AUTO_INCREMENT,implementation_id int(11) NOT NULL,   field_id int(11) NOT NULL ,  name varchar(255) NOT NULL DEFAULT '',  description text,  field_type int(11) DEFAULT NULL,  concept_id int(11) DEFAULT NULL,  table_name varchar(50) DEFAULT NULL,  attribute_name varchar(50) DEFAULT NULL,  default_value text,  select_multiple tinyint(1) NOT NULL DEFAULT '0',  creator int(11) NOT NULL DEFAULT '0',  date_created datetime NOT NULL,  changed_by int(11) DEFAULT NULL,  date_changed datetime DEFAULT NULL,  retired tinyint(1) NOT NULL DEFAULT '0',  retired_by int(11) DEFAULT NULL,  date_retired datetime DEFAULT NULL,  retire_reason varchar(255) DEFAULT NULL,  uuid char(38) DEFAULT NULL,  PRIMARY KEY (surrogate_id),  KEY field_uuid_index (uuid),  KEY field_retired_status (retired),  KEY user_who_changed_field (changed_by),  KEY concept_for_field (concept_id),  KEY user_who_created_field(creator),  KEY type_of_field (field_type),  KEY user_who_retired_field (retired_by)) ENGINE=InnoDB AUTO_INCREMENT=5 DEFAULT CHARSET=utf8;
CREATE TABLE IF NOT EXISTS tmp_field_answer (surrogate_id int(11) NOT NULL AUTO_INCREMENT,   implementation_id int(11) NOT NULL,   field_id int(11) NOT NULL DEFAULT '0',  answer_id int(11) NOT NULL DEFAULT '0',  creator int(11) NOT NULL DEFAULT '0',  date_created datetime NOT NULL,  uuid char(38) DEFAULT NULL,  PRIMARY KEY (surrogate_id),  KEY field_answer_uuid_index (uuid),  KEY field_answer_concept (answer_id),  KEY user_who_created_field_answer (creator)) ENGINE=InnoDB DEFAULT CHARSET=utf8;
CREATE TABLE IF NOT EXISTS tmp_field_type (surrogate_id int(11) NOT NULL AUTO_INCREMENT,   implementation_id int(11) NOT NULL,   field_type_id int(11) NOT NULL,  name varchar(50) DEFAULT NULL,  description text,  is_set tinyint(1) NOT NULL DEFAULT '0',  creator int(11) NOT NULL DEFAULT '0',  date_created datetime NOT NULL,  uuid char(38) DEFAULT NULL,  PRIMARY KEY (surrogate_id),  KEY field_type_uuid_index (uuid),  KEY user_who_created_field_type (creator)) ENGINE=InnoDB AUTO_INCREMENT=6 DEFAULT CHARSET=utf8;
CREATE TABLE IF NOT EXISTS tmp_form_field (surrogate_id int(11) NOT NULL AUTO_INCREMENT,   implementation_id int(11) NOT NULL,  form_field_id int(11) NOT NULL ,  form_id int(11) NOT NULL DEFAULT '0',  field_id int(11) NOT NULL DEFAULT '0',  field_number int(11) DEFAULT NULL,  field_part varchar(5) DEFAULT NULL,  page_number int(11) DEFAULT NULL,  parent_form_field int(11) DEFAULT NULL,  min_occurs int(11) DEFAULT NULL,  max_occurs int(11) DEFAULT NULL,  required tinyint(1) NOT NULL DEFAULT '0',  changed_by int(11) DEFAULT NULL,  date_changed datetime DEFAULT NULL,  creator int(11) NOT NULL DEFAULT '0',  date_created datetime NOT NULL,  sort_weight double DEFAULT NULL,  uuid char(38) DEFAULT NULL,  PRIMARY KEY (surrogate_id),  KEY form_field_uuid_index (uuid),  KEY user_who_last_changed_form_field (changed_by),  KEY user_who_created_form_field (creator),  KEY field_within_form (field_id),  KEY form_containing_field (form_id),  KEY form_field_hierarchy (parent_form_field)) ENGINE=InnoDB DEFAULT CHARSET=utf8;
